(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[33293],{829932:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}},297786:(e,t,i)=>{var n=i(671811),r=i(240327);e.exports=function(e,t){for(var i=0,o=(t=n(t,e)).length;null!=e&&i<o;)e=e[r(t[i++])];return i&&i==o?e:void 0}},880531:(e,t,i)=>{var n=i(562705),r=i(829932),o=i(701469),s=i(733448),a=n?n.prototype:void 0,l=a?a.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return r(t,e)+"";if(s(t))return l?l.call(t):"";var i=t+"";return"0"==i&&1/t==-Infinity?"-0":i}},671811:(e,t,i)=>{var n=i(701469),r=i(115403),o=i(555514),s=i(479833);e.exports=function(e,t){return n(e)?e:r(e,t)?[e]:o(s(e))}},115403:(e,t,i)=>{var n=i(701469),r=i(733448),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;e.exports=function(e,t){if(n(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!r(e))||(s.test(e)||!o.test(e)||null!=t&&e in Object(t))}},624523:(e,t,i)=>{var n=i(288306);e.exports=function(e){var t=n(e,(function(e){return 500===i.size&&i.clear(),e})),i=t.cache;return t}},555514:(e,t,i)=>{var n=i(624523),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,s=n((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(r,(function(e,i,n,r){t.push(n?r.replace(o,"$1"):i||e)})),t}));e.exports=s},240327:(e,t,i)=>{var n=i(733448);e.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},227361:(e,t,i)=>{var n=i(297786);e.exports=function(e,t,i){var r=null==e?void 0:n(e,t);return void 0===r?i:r}},288306:(e,t,i)=>{var n=i(883369);function r(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],o=i.cache;if(o.has(r))return o.get(r);var s=e.apply(this,n);return i.cache=o.set(r,s)||o,s};return i.cache=new(r.Cache||n),i}r.Cache=n,e.exports=r},418601:(e,t,i)=>{var n=i(14841),r=1/0;e.exports=function(e){return e?(e=n(e))===r||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},640554:(e,t,i)=>{var n=i(418601);e.exports=function(e){var t=n(e),i=t%1;return t==t?i?t-i:t:0}},479833:(e,t,i)=>{var n=i(880531);e.exports=function(e){return null==e?"":n(e)}},653250:(e,t,i)=>{var n=i(667294);var r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=n.useState,s=n.useEffect,a=n.useLayoutEffect,l=n.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!r(e,i)}catch(n){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var i=t(),n=o({inst:{value:i,getSnapshot:t}}),r=n[0].inst,d=n[1];return a((function(){r.value=i,r.getSnapshot=t,c(r)&&d({inst:r})}),[e,i,t]),s((function(){return c(r)&&d({inst:r}),e((function(){c(r)&&d({inst:r})}))}),[e]),l(i),i};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:d},950139:(e,t,i)=>{var n=i(667294),r=i(61688);var o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=r.useSyncExternalStore,a=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,i,n,r){var u=a(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=c((function(){function e(e){if(!l){if(l=!0,s=e,e=n(e),void 0!==r&&h.hasValue){var t=h.value;if(r(t,e))return a=t}return a=e}if(t=a,o(s,e))return t;var i=n(e);return void 0!==r&&r(t,i)?t:(s=e,a=i)}var s,a,l=!1,c=void 0===i?null:i;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,i,n,r]);var p=s(e,u[0],u[1]);return l((function(){h.hasValue=!0,h.value=p}),[p]),d(p),p}},61688:(e,t,i)=>{e.exports=i(653250)},552798:(e,t,i)=>{e.exports=i(950139)},798477:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/visual-search"]=function(){return i(737044).Z}},508563:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/visual-search/products"]=function(){return i(737044).Z}},301921:(e,t,i)=>{i.r(t),i.d(t,{default:()=>_});var n=i(667294),r=i(564194),o=i(768559),s=i(868565),a=i(905723),l=i(304515),c=i(883119),d=i(785893);const u={overlay:{__style:{backgroundColor:"#000"}}};function h(e){var t,i,r,o;const{pin:{id:s,images:h,title:p,videos:m,video_status_message:v}}=e,g=v||{},f=h&&h["236x"],y=m&&(null===(t=m.video_list)||void 0===t?void 0:t[a.Z.V_HLSV4]),{duration:_}=y||{};return(0,d.jsx)(n.Fragment,{children:(0,d.jsx)(c.Zb,{children:(0,d.jsxs)(c.iP,{role:"link",href:`/pin/${s}`,rounding:2,children:[(0,d.jsxs)(c.xu,{overflow:"hidden",position:"relative",rounding:2,children:[f&&(0,d.jsx)(c.Ee,{alt:p||"",color:"lightGray",naturalHeight:null!==(i=f.height)&&void 0!==i?i:1,naturalWidth:null!==(r=f.width)&&void 0!==r?r:1,src:null!==(o=f.url)&&void 0!==o?o:""}),!!_&&(0,d.jsx)(c.xu,{padding:2,position:"absolute",bottom:!0,left:!0,display:"flex",children:(0,d.jsx)(l.Z,{duration:_})}),(0,d.jsx)(c.xu,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,opacity:.4,dangerouslySetInlineStyle:u.overlay}),(0,d.jsxs)(c.xu,{position:"absolute",top:!0,left:!0,padding:5,width:"100%",children:[(0,d.jsx)(c.X6,{color:"light",overflow:"normal",size:"400",children:g.title}),(0,d.jsx)(c.xu,{marginTop:4,children:(0,d.jsx)(c.xv,{color:"light",size:"200",overflow:"normal",children:g.subtitle})})]})]}),(0,d.jsx)(c.xu,{display:"flex",alignItems:"start",justifyContent:"between",marginTop:1,paddingX:1,children:(0,d.jsx)(c.xu,{flex:"grow",children:p&&(0,d.jsx)(c.xu,{paddingY:1,children:(0,d.jsx)(c.xv,{inline:!0,size:"200",weight:"bold",children:p})})})})]})})})}var p=i(623568),m=i(802201),v=i(276775),g=i(813401),f=i(217705),y=i(35495);function _({trackingParams:e,objectIdStr:t,impressionData:i,auxData:a,componentType:l,slotIndex:c,viewData:u,viewParameter:_,viewType:x,pin:b,pinId:w,...S}){var C,E,P,T;const I=(0,v.TH)(),j=(0,m.S6)(),R=(w?j(w):null)||b,k=!(null===(C=R.story_pin_data)||void 0===C||!C.is_deleted),A=e||(0,o.Z)(R,I),D=(0,s.Z)(R),O=!!(D&&D.url&&D.height&&D.width)||void 0,M=D&&R.videos?R.videos.id:void 0,[L,z]=(0,n.useState)(!1),Z=(0,n.useCallback)((()=>z(!k)),[k]),F=(0,n.useCallback)((()=>z(!1)),[]),N=(0,g.yz)();return(0,d.jsx)(r.Z,{componentType:l,contextLogData:{pwa_type:N,...a,...(0,y.Kl)(R,a)},impressionAuxFields:{...i||{},isNativeVideoAndWatchable:O,videoIdStr:M,clientTrackingParams:A||`${R.tracking_params||""}-0`,imageURL:null!==(E=null===(P=R.images)||void 0===P||null===(T=P["236x"])||void 0===T?void 0:T.url)&&void 0!==E?E:"",richTypes:(0,y.GT)(R)},impressionType:"Pin",isPaused:!L,loggingId:R.id,slotIndex:c,objectIdStr:t,viewData:u,viewParameter:_,viewType:x,children:(0,p._J)(R)?(0,d.jsx)(h,{pin:R}):(0,d.jsx)(f.Z,{...S,debugImpressionState:L?"started":"paused",onError:F,onLoad:Z,pin:R,pinId:w,trackingParameters:{componentType:l,contextLogData:a,slotIndex:c,viewParameter:_,viewType:x}})})}},27255:(e,t,i)=>{i.d(t,{Z:()=>n});const n={AMP_TRACKING_DOMAIN:"amp.pinterest.com",BoardPrivacy:{SECRET:"secret",PUBLIC:"public",PROTECTED:"protected"},BoardType:{PROTECTED:"protected"},BulkAction:{MOVE:"bulkMove",COPY:"bulkCopy",CREATE_SECTION:"bulkCreateSection",DELETE:"bulkDelete"},MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION:500,MAX_CHARS_FOR_BOARD_TITLE:50,MAX_CHARS_FOR_FIRST_NAME:30,MAX_FETCH_NUM_FOLLOWERS_PER_PAGE:50,MAX_STORED_VISITED_PIN_PAGES:10,VIDEO_AUTOPLAY_LOCAL_STORAGE_KEY:"_video_autoplay_state",VIDEO_IFRAME_ID:"video-iframe"}},403368:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),r=i(898781),o=i(883119),s=i(785893);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const l=16,c=32;class d extends n.Component{constructor(...e){super(...e),a(this,"state",{isHovering:!1}),a(this,"handleMouseEnter",(e=>{this.setState({isHovering:!0}),this.props.onMouseEnter&&this.props.onMouseEnter(e)})),a(this,"handleMouseLeave",(e=>{this.setState({isHovering:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e)}))}render(){const{forwardedRef:e,icon:t,onClick:i,onMouseDown:n,onMouseUp:r,selected:a,style:d,text:u,x:h,y:p,zIndex:m,backdropDiameter:v=c,dotDiameter:g=l}=this.props,{isHovering:f}=this.state,y=f?v+4:v,_={zIndex:m,position:"absolute",top:p-y/2,left:h-y/2,outline:"none"},x={backgroundColor:"rgba(0, 0, 0, 0.1)",width:y,height:y,border:"none",borderRadius:y,cursor:i?"pointer":"default"};return(0,s.jsx)("div",{"data-test-id":"flashlight-dot",onClick:i,onKeyPress:i,onMouseDown:n,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:r,ref:e,role:"button",style:_,tabIndex:"0",children:(0,s.jsx)("div",{style:{...x,...d},children:(0,s.jsxs)(o.xu,{alignItems:"center",borderStyle:"none",color:"default",display:"flex",height:g,justifyContent:"center",position:"absolute",padding:0,width:g,dangerouslySetInlineStyle:{__style:{boxShadow:a?"0 0 0 3px #e60023":"none",borderRadius:g,top:(y-g)/2,left:(y-g)/2}},children:[!!u&&(0,s.jsx)(o.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:u}),t&&(0,s.jsx)(o.JO,{accessibilityLabel:this.props.i18n._('Tag anchor', 'accessibility label for an anchor for an object in a pin', 'accessibility label for an anchor for an object in a pin'),color:"error",icon:t,size:g/2,inline:!0})]})})})}}const u=(0,n.forwardRef)(((e,t)=>{const i=(0,r.ZP)();return(0,s.jsx)(d,{...e,forwardedRef:t,i18n:i})}))},247568:(e,t,i)=>{i.d(t,{Z:()=>j});var n=i(667294),r=i(523563),o=i(785893);const s={nw:0,ne:90,se:180,sw:270},a={ne:[6,-6],se:[6,6],sw:[-6,6],nw:[-6,-6]},l={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},c=(e,t,i,n)=>{if("rounded"===n){const[n,r]=a[e];return`translate(${t+n}, ${i+r}), rotate(${s[e]})`}return`translate(${t}, ${i}), rotate(${s[e]})`};function d({corner:e,x:t,y:i,size:n,cornerStyle:r}){return(0,o.jsxs)("g",{transform:c(e,t,i,r),style:{cursor:l[e]},children:[(0,o.jsx)("rect",{fill:"rgba(0,0,0,0)",stroke:"none",x:0,y:0,width:n,height:n,className:`v2cropperHandle ${e}`}),"rounded"===r?(0,o.jsx)("path",{d:"M5,0C2.2,0,0,2.2,0,5v15h6V6h14V0H5z",fill:"#fff",className:`v2cropperHandle ${e}`}):(0,o.jsx)("path",{d:`M ${n} 0 L 0 0 L 0 ${n}`,fill:"none",stroke:"#fff",strokeWidth:6,className:`v2cropperHandle ${e}`})]})}const u={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"};function h({edge:e,x:t,y:i,w:n,h:r}){return(0,o.jsx)("rect",{fill:"rgba(0,0,0,0)",stroke:"none",x:t,y:i,width:n,height:r,className:`v2cropperHandle ${e}`,style:{cursor:u[e]}})}const p=20;function m({x:e,y:t,w:i,h:r}){const s="rounded";return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(d,{corner:"nw",x:e,y:t,size:p,cornerStyle:s}),(0,o.jsx)(d,{corner:"ne",x:e+i,y:t,size:p,cornerStyle:s}),(0,o.jsx)(d,{corner:"sw",x:e,y:t+r,size:p,cornerStyle:s}),(0,o.jsx)(d,{corner:"se",x:e+i,y:t+r,size:p,cornerStyle:s}),(0,o.jsx)(h,{edge:"n",x:e+p,y:t-10,w:i-40,h:30}),(0,o.jsx)(h,{edge:"e",x:e+i-p,y:t+p,w:30,h:r-40}),(0,o.jsx)(h,{edge:"s",x:e+p,y:t+r-10,w:i-40,h:30}),(0,o.jsx)(h,{edge:"w",x:e-p,y:t+p,w:30,h:r-40})]})}var v=i(391254),g=i(883119),f=i(615071),y=i(112690);function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const x=10,b=48;class w extends n.Component{constructor(...e){super(...e),_(this,"state",{cropArea:this.props.initialCropArea||{h:0,w:0,x:0,y:0},cropChangeType:null}),_(this,"cropResizeDirection",null),_(this,"_cropperOverlay",(0,n.createRef)()),_(this,"_checkCropHandleValid",((e,t)=>{const{cropArea:{h:i,w:n,x:r,y:o}}=this.state;switch(this.cropResizeDirection){case"ne":e<r&&t>o+i?this.cropResizeDirection="sw":e<r?this.cropResizeDirection="nw":t>o+i&&(this.cropResizeDirection="se");break;case"nw":e>r+n&&t>o+i?this.cropResizeDirection="se":e>r+n?this.cropResizeDirection="ne":t>o+i&&(this.cropResizeDirection="sw");break;case"se":e<r&&t<o?this.cropResizeDirection="nw":e<r?this.cropResizeDirection="sw":t<o&&(this.cropResizeDirection="ne");break;case"sw":e>r+n&&t<o?this.cropResizeDirection="ne":e>r+n?this.cropResizeDirection="se":t<o&&(this.cropResizeDirection="nw");break;case"n":t>o+i&&(this.cropResizeDirection="s");break;case"s":t<o&&(this.cropResizeDirection="n");break;case"e":e<r&&(this.cropResizeDirection="w");break;case"w":e>r+n&&(this.cropResizeDirection="e")}})),_(this,"handleClickOutside",(e=>{const{enableClickOutside:t,entrySource:i,imageSize:n,onChange:r,viewParameter:o,logContextEvent:s}=this.props,{cropArea:a}=this.state,l=e.clientX-this._cropperOverlayCoor.x,c=e.clientY-this._cropperOverlayCoor.y;var d,u;t&&(l<a.x||c<a.y||l>a.x+a.w||c>a.y+a.h)&&(s({event_type:101,view_type:72,view_parameter:o,element:11677,aux_data:{commerce_data:JSON.stringify({entrypoint:i})}}),r({origCrop:{h:null!==(d=n.h)&&void 0!==d?d:1,w:null!==(u=n.w)&&void 0!==u?u:1,x:0,y:0}}))})),_(this,"handleOnMouseDown",(e=>{var t;e.preventDefault(),e.stopPropagation();const{clientX:i,clientY:n}=e,r=e.target,o=i-this._cropperOverlayCoor.x,s=n-this._cropperOverlayCoor.y,a=r.classList?Array.from(r.classList):r instanceof Element&&(null===(t=r.getAttribute("class"))||void 0===t?void 0:t.split(" "))||[];a.includes("v2cropperHandle")?(this.setState({cropChangeType:"resize"}),a.includes("ne")&&(this.cropResizeDirection="ne"),a.includes("nw")&&(this.cropResizeDirection="nw"),a.includes("se")&&(this.cropResizeDirection="se"),a.includes("sw")&&(this.cropResizeDirection="sw"),a.includes("n")&&(this.cropResizeDirection="n"),a.includes("s")&&(this.cropResizeDirection="s"),a.includes("e")&&(this.cropResizeDirection="e"),a.includes("w")&&(this.cropResizeDirection="w")):a.includes("v2cropSection")?(this.setState({cropChangeType:"move"}),this.cropChangeStartCoor={x:o,y:s}):a.includes("v2shadowMask")&&(this.cropChangeStartCoor={x:o,y:s},this.setState({cropArea:{h:0,w:0,x:o,y:s},cropChangeType:"select"}))})),_(this,"handleOnMouseMove",(e=>{const{cropArea:{h:t,w:i,x:n,y:r},cropChangeType:o}=this.state,{imageSize:s}=this.props,{clientX:a,clientY:l}=e,c=a-this._cropperOverlayCoor.x,d=l-this._cropperOverlayCoor.y;if("resize"===o){var u,h;const e=Math.max(Math.min(c,(null!==(u=s.w)&&void 0!==u?u:1)-x),x),o=Math.max(Math.min(d,(null!==(h=s.h)&&void 0!==h?h:1)-x),x);switch(this._checkCropHandleValid(e,o),this.cropResizeDirection){case"ne":{const i=Math.max(t+(r-o),b),s=Math.max(e-n,b);this.setState({cropArea:{h:i,w:s,x:n,y:i<=b?r:o}});break}case"nw":{const s=Math.max(i+(n-e),b),a=Math.max(t+(r-o),b);this.setState({cropArea:{h:a,w:s,x:s===b?n:e,y:a===b?r:o}});break}case"se":{const t=Math.max(o-r,b),i=Math.max(e-n,b);this.setState({cropArea:{h:t,w:i,x:n,y:r}});break}case"sw":{const t=Math.max(o-r,b),s=Math.max(i+(n-e),b);this.setState({cropArea:{h:t,w:s,x:s===b?n:e,y:r}});break}case"n":{const e=Math.max(r-o+t,b);this.setState({cropArea:{h:e,w:i,x:n,y:e===b?r:o}});break}case"s":{const e=Math.max(o-r,b);this.setState({cropArea:{h:e,w:i,x:n,y:r}});break}case"e":{const i=Math.max(e-n,b);this.setState({cropArea:{h:t,w:i,x:n,y:r}});break}case"w":{const o=Math.max(i-e+n,b);this.setState({cropArea:{h:t,w:o,x:o===b?n:e,y:r}});break}}}else if("move"===o){var p,m;const e=c-this.cropChangeStartCoor.x,o=d-this.cropChangeStartCoor.y,a=Math.max(Math.min(n+e,(null!==(p=s.w)&&void 0!==p?p:1)-i-x),x),l=Math.max(Math.min(r+o,(null!==(m=s.h)&&void 0!==m?m:1)-t-x),x);this.cropChangeStartCoor={x:c,y:d},this.setState({cropArea:{h:t,w:i,x:a,y:l}})}else if("select"===o){var v,g;const e=Math.max(Math.min(c,null!==(v=s.w)&&void 0!==v?v:1),0),t=Math.max(Math.min(d,null!==(g=s.h)&&void 0!==g?g:1),0),i=e-this.cropChangeStartCoor.x,n=t-this.cropChangeStartCoor.y;this.setState({cropArea:{h:Math.abs(n),w:Math.abs(i),x:Math.min(this.cropChangeStartCoor.x,e),y:Math.min(this.cropChangeStartCoor.y,t)}})}})),_(this,"handleOnMouseUp",(()=>{const{cropChangeType:e}=this.state;"resize"!==e&&"move"!==e&&"select"!==e||this.handleCrop(),this.cropResizeDirection=null}))}componentDidMount(){const{disableCrop:e}=this.props,t=document.body,i=this._cropperOverlay.current;if(i&&t){if(i){const e=i.getBoundingClientRect();this._cropperOverlayCoor={x:e.left,y:e.top}}e?e&&i.addEventListener("mousedown",this.handleClickOutside):(window.addEventListener("mouseup",this.handleOnMouseUp),t.addEventListener("mousemove",this.handleOnMouseMove),i.addEventListener("mousedown",this.handleOnMouseDown))}}componentWillUnmount(){const{disableCrop:e,entrySource:t}=this.props,i=document.body,n=this._cropperOverlay.current;n&&i&&(e?e&&"shopping"===t&&n.removeEventListener("mousedown",this.handleClickOutside):(window.removeEventListener("mouseup",this.handleOnMouseUp),i.removeEventListener("mousemove",this.handleOnMouseMove),n.removeEventListener("mousedown",this.handleOnMouseDown)))}handleCrop(){const{entrySource:e,imageSize:t,onChange:i,viewParameter:n,logContextEvent:r}=this.props,{cropChangeType:o,cropArea:s}=this.state;if(0===s.w&&0===s.h){var a,l;this.setState({cropChangeType:null}),i({origCrop:{h:(null!==(a=t.h)&&void 0!==a?a:1)-20,w:(null!==(l=t.w)&&void 0!==l?l:1)-20,x,y:x}})}else{var c,d,u,h;this.setState({cropChangeType:null});const a=Math.max(Math.min(s.x,(null!==(c=t.w)&&void 0!==c?c:1)-b-x),x),l=Math.max(Math.min(s.y,(null!==(d=t.h)&&void 0!==d?d:1)-b-x),x);let v,g;if(s.h<b)v=b;else if(l+s.h>(null!==(u=t.h)&&void 0!==u?u:1)-x){var p;v=(null!==(p=t.h)&&void 0!==p?p:1)-l-x}else v=s.h;if(s.w<b)g=b;else if(a+s.w>(null!==(h=t.w)&&void 0!==h?h:1)-x){var m;g=(null!==(m=t.w)&&void 0!==m?m:1)-a-x}else g=s.w;switch(o){case"move":r({event_type:7603,view_type:72,view_parameter:n,aux_data:{commerce_data:e?JSON.stringify({entrypoint:e}):void 0}});break;case"resize":r({event_type:7604,view_type:72,view_parameter:n,aux_data:{commerce_data:e?JSON.stringify({entrypoint:e}):void 0}})}i({origCrop:{h:v,w:g,x:a,y:l}})}}render(){const{children:e,previewCropArea:t,showPreviewArea:i,disableCrop:n}=this.props,{cropArea:{h:r,w:s,x:a,y:l},cropChangeType:c}=this.state;return(0,o.jsxs)(g.xu,{ref:this._cropperOverlay,position:"absolute",top:!0,left:!0,width:"100%",height:"100%",dangerouslySetInlineStyle:{__style:{cursor:n?"auto":"crosshair"}},children:[(0,o.jsx)(v.Z,{unsafeCSS:"\n.preview-crop-area-enter {\n  opacity: 0;\n}\n\n.preview-crop-area-enter-active {\n  opacity: 1;\n  transition: opacity 300ms;\n}\n\n.preview-crop-area-exit {\n  opacity: 1;\n}\n\n.preview-crop-area-exit-active {\n  opacity: 0;\n  transition: opacity 300ms;\n}\n\n.preview-crop-area-exit-done {\n  opacity: 0;\n}\n"}),(0,o.jsxs)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:[(0,o.jsx)("defs",{children:(0,o.jsxs)("mask",{id:"Mask",children:[(0,o.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",rx:"0",ry:"0",fill:"#fff"}),(0,o.jsx)("rect",{x:a,y:l,width:s,height:r,id:"hole",rx:n?15:0,ry:n?15:0},`${a}${l}`),(0,o.jsx)(f.Z,{in:i&&!c,timeout:300,classNames:"preview-crop-area",mountOnEnter:!0,unmountOnExit:!0,children:(0,o.jsx)("rect",{x:t.x,y:t.y,width:t.w,height:t.h,id:"preview",rx:4,ry:4},`${t.x}${t.y}`)})]})}),(0,o.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",style:{fill:"rgba(0,0,0,0.5)"},mask:"url(#Mask)",className:"v2shadowMask"}),(0,o.jsx)("use",{href:"#hole",fill:"rgba(0,0,0,0)",stroke:n?"none":"#fff",strokeWidth:"2",className:"v2cropSection",style:{cursor:n?"auto":"move"}}),"select"!==c&&!n&&(0,o.jsx)(m,{x:a,y:l,w:s,h:r})]}),e]})}}function S(e){const t=(0,y.Z)();return(0,o.jsx)(w,{logContextEvent:t,...e})}var C=i(403368);function E({entrySource:e,showAnimation:t,auxData:i,index:r,isStela:s,onClick:a,onHover:l,onUnhover:c,spotlightCenter:d,viewParameter:u,viewType:h}){const p=(0,y.Z)();(0,n.useEffect)((()=>{p(e?{event_type:120,view_type:h,view_parameter:u,element:1221,aux_data:{commerce_data:JSON.stringify({entrypoint:e}),...i}}:{event_type:120,element:1260,aux_data:i})}),[]);const m=parseFloat((.1*(r+1)).toFixed(2)),v={animation:t?`spotlightDotPop 0.6s ease-out ${m}s both`:"none"};return(0,o.jsx)(C.Z,{x:d.x,y:d.y,onClick:e=>{e&&(e.stopPropagation(),e.preventDefault()),p({event_type:101,view_parameter:u,element:s?1221:1260,aux_data:i}),a(r)},onMouseEnter:e=>{e&&(e.stopPropagation(),e.preventDefault()),l(r)},onMouseLeave:e=>{e&&(e.stopPropagation(),e.preventDefault()),c()},style:v})}var P=i(599611);const T=({entrySource:e,showAnimation:t,pinId:i,imageSignature:r,imageSize:s,currentSpotlightIdx:a,spotlightAreas:l,handleSpotlightClick:c,handleSpotlightHover:d,handleSpotlightUnhover:u,viewParameter:h,viewType:p})=>(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(v.Z,{unsafeCSS:"\n@keyframes spotlightDotPop {\n  0% {\n    opacity: 0;\n    transform: scale(0);\n  }\n\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n}"}),l.map(((n,l)=>{if(l===a)return null;const m=(0,P.Z)({cropArea:n,scaledWidth:s.w,scaledHeight:s.h}),v={x:m.x+m.w/2,y:m.y+m.h/2},g={commerce_data:JSON.stringify({entrypoint:e}),pin_id:i,image_signature:r,visual_objects:JSON.stringify([{x:n.x,y:n.y,w:n.w,h:n.h}])},f=`${v.x}${v.y}`;return(0,o.jsx)(E,{entrySource:e,showAnimation:t,auxData:g,index:l,isStela:!!n.is_stela,onClick:c,onHover:d,onUnhover:u,spotlightCenter:v,viewParameter:h,viewType:p},f)}))]});var I=i(554383);function j({cropSource:e,disableCrop:t,entrySource:i,imageSize:s,imageSignature:a,initialCropArea:l,pin:c,onChange:d,showAnimation:u,searchQuery:h,spotlightAreas:p=[],trafficSource:m,viewParameter:v,viewType:f}){const[y,_]=(0,n.useState)(!1),[x,b]=(0,n.useState)({w:0,h:0,x:0,y:0}),[w,C]=(0,n.useState)(0);(0,n.useEffect)((()=>{const e=p.findIndex((e=>(0,r.Z)(l,(0,P.Z)({cropArea:e,scaledWidth:s.w,scaledHeight:s.h}),4)));C(e)}),[s,l,p]);const E=e=>{const t=p[e],n=(0,P.Z)({cropArea:t,scaledWidth:s.w,scaledHeight:s.h});d({origCrop:n,cropSource:t.is_stela?4:1,entrySource:i,trafficSource:m})},j=p&&!!p.length,{is_eligible_for_related_products:R}=c||{},k=R&&"shopping"===i;return(0,o.jsx)(n.Fragment,{children:k?(0,o.jsx)(g.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:j?{pointerEvents:"none",backgroundColor:"rgba(0, 0, 0, 0.2)"}:{}},left:!0,position:"absolute",right:!0,top:!0,children:j&&(0,o.jsx)(n.Fragment,{children:(0,o.jsx)(I.default,{alwaysShow:!0,cropSource:e,currentSpotlightIdx:w,height:s.h,pin:c,searchQuery:h,trafficSource:m,width:s.w,handleStelaClick:E,enablePointerEvents:!0})})}):(0,o.jsx)(S,{enableClickOutside:!y,entrySource:i,imageSize:s,initialCropArea:l,onChange:({origCrop:e})=>{d({origCrop:e,cropSource:6,entrySource:i,trafficSource:m})},previewCropArea:x,showPreviewArea:!1,disableCrop:t,viewParameter:v,children:j&&(0,o.jsx)(T,{entrySource:i,showAnimation:u,pinId:c.id,handleSpotlightHover:e=>{e!==w&&(_(!0),b((0,P.Z)({cropArea:p[e],scaledWidth:s.w,scaledHeight:s.h})))},handleSpotlightUnhover:()=>{_(!1)},imageSignature:a,imageSize:s,currentSpotlightIdx:w,spotlightAreas:p,handleSpotlightClick:E,viewParameter:v,viewType:f})},JSON.stringify(l))})}},391254:(e,t,i)=>{i.d(t,{Z:()=>o});i(441143);var n=i(785893);class r{static factory(e){return e instanceof r?e:new r(String(e))}constructor(e){this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}toString(){return this._private_safe_value}}function o(e){const{css:t,unsafeCSS:i,...o}=e,s=String(t||"")||i||"";return!!s?(0,n.jsx)("style",{...o,dangerouslySetInnerHTML:{__html:String(r.factory(s))}}):null}},941646:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(883119),r=i(785893);function o(e){const{children:t,display:i,id:o}=e;return(0,r.jsx)(n.xu,{"data-test-id":o,display:i,children:t})}},407043:(e,t,i)=>{i.d(t,{B:()=>l,v:()=>a});var n=i(385740),r=i(425288),o=i(785893);const{Provider:s,useHook:a}=(0,r.Z)("ContextLogger");function l({children:e,value:t}){const{setViewContextData:i}=(0,n.sV)();return t.injectSetViewContextDataFromHook=i,(0,o.jsx)(s,{value:t,children:e})}},112690:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(407043);const r=()=>(0,n.v)().logContextEvent},385740:(e,t,i)=>{i.d(t,{BE:()=>c,Ih:()=>d,SU:()=>u,sV:()=>a});var n=i(667294),r=i(425288),o=i(785893);const{Provider:s,useHook:a}=(0,r.Z)("View");let l;function c(){return l}function d({children:e,initialState:t={}}){const[i,r]=(0,n.useState)(t),a=(0,n.useCallback)((()=>{l={},r({})}),[]),c=(0,n.useCallback)((e=>{l={...l,...e},r((t=>({...t,...e})))}),[]),d=(0,n.useMemo)((()=>({viewContextData:i,clearViewContextData:a,setViewContextData:c})),[i,c,a]);return(0,o.jsx)(n.Fragment,{children:(0,o.jsx)(s,{value:d,children:e})})}function u(){const{viewContextData:e}=a();return e}},11363:(e,t,i)=>{i.d(t,{Bx:()=>r,N4:()=>s,is:()=>a,lt:()=>n,oM:()=>o});const n=e=>e._('You\'re almost there! Log in to access all of Pinterest', 'loginModal.limitedLogin.subheader', 'Subheader text on personalized login modal/flyout to remind users to log in'),r=e=>e._('Log in to save this Pin', 'limitedLogin.modalHeader.repin', 'Title on mobile web limited login modal to prompt users to login after they clicked save button.'),o=e=>e._('Log in to edit this Pin', 'limitedLogin.modalHeader.editPin', 'Title on mobile web limited login modal to prompt users to login after they clicked edit button.'),s=({i18n:e,toFollow:t})=>t?e._('Log in to follow', 'limitedLogin.modalHeader.follow', 'Title on mobile web limited login modal to prompt users to login to follow a user or board.'):e._('Log in to unfollow', 'limitedLogin.modalHeader.unfollow', 'Title on mobile web limited login modal to prompt users to login to unfollow a user or board.'),a=e=>e._('Log in to create a Pin or board', 'limitedLogin.modalHeader.create', 'Title on mobile web limited login modal to prompt users to login to create a Pin or board.')},946984:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(898781),r=i(11363),o=i(154391);const s=(e={shouldStopEventPropagation:!0})=>{const{loginForMore:t,viewer:i,limitedLoginModalSubheader:s}=(0,o.H)(),{shouldStopEventPropagation:a}=e,l="AUTH"===i.type,c=(0,n.ZP)();return l?e=>e:(e,i)=>e=>{let n=null;e&&(e.nativeEvent&&e.nativeEvent instanceof Event?n=e:e.event&&(n=e.event)),a&&n&&n.stopPropagation&&n.stopPropagation(),t&&t.setVisible(!0),s&&(i?s.setText(i):s.setText((0,r.lt)(c)))}}},375571:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),r=i(172071),o=i(395164);function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class a extends n.Component{constructor(...e){super(...e),s(this,"state",{error:null,info:null}),s(this,"resetError",(()=>{this.setState({error:null,info:null})}))}componentDidCatch(e,t){try{const t=this.props.name,i=this.props.type||"secondary";(0,o.T)({errorBoundary:t,errorBoundaryType:i,message:e.message,name:e.name,stack:e.stack}),r.Z.increment("react.error_boundary",.1,{component:void 0,name:this.props.name})}catch(i){r.Z.increment("react.error_boundary.error",1,{name:this.props.name})}this.setState({error:e,info:t})}render(){const{renderErrorState:e}=this.props,{error:t,info:i}=this.state;return t&&i?e?e({error:t,info:i,resetError:this.resetError}):null:this.props.children}}},319915:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(375571).Z},121093:(e,t,i)=>{i.d(t,{Z:()=>c});var n=i(667294),r=i(702664),o=i(332611),s=i(242923);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends n.Component{constructor(...e){super(...e),a(this,"state",{hasCompleted:[],hasDismissed:[]}),a(this,"view",(()=>{const{experience:e,isBackendExperience:t,targeting:i,viewExperience:n,viewExperienceObject:r}=this.props;e&&"viewed"!==e.status&&(t?(e.status="viewed",r(e)):i?n(e.placement_id,e.experience_id,i):n(e.placement_id,e.experience_id))})),a(this,"complete",(e=>{const{completeExperience:t,completeExperienceObject:i,experience:n,isBackendExperience:r,preventRemoval:o,targeting:s}=this.props,a=e||1;if(n&&!this.state.hasCompleted.includes(n.experience_id)){const{placement_id:e,experience_id:l}=n||{},c=o||2===a;(1===a||c)&&e&&l&&(r?i(n,c):s?t(e,l,c,s):t(e,l,c),this.setState((e=>({hasCompleted:[...e.hasCompleted,l]}))))}})),a(this,"dismiss",(()=>{const{dismissExperience:e,dismissExperienceObject:t,experience:i,isBackendExperience:n,preventRemoval:r,targeting:o}=this.props,{placement_id:s,experience_id:a}=i||{};i&&!this.state.hasDismissed.includes(a)&&(n?t(i):o?e(s,a,!!r,o):e(s,a,!!r),this.setState((e=>({hasDismissed:[...e.hasDismissed,a]}))))})),a(this,"shouldRenderExperience",(()=>{const{experience:e}=this.props;if(e){const{eligibleIds:t,eligibleTypes:i,predicate:n,transitionType:r}=this.props,{experience_id:o,type:s}=e;if(t&&t.includes(o))return!0;if(null==t||!t.length){if(n&&n(e))return!0;if(i&&i.includes(s))return!0;if(r&&r===s)return!0}}return!1}))}componentDidMount(){if(this.props.disableAutoView)return;const{experience:e}=this.props;e&&this.shouldRenderExperience()&&this.view()}componentDidUpdate(e){if(this.props.disableAutoView)return;const t=e.experience,i=this.props.experience;i&&this.shouldRenderExperience()&&(t&&t.experience_id===i.experience_id||this.view())}render(){const{children:e,experience:t,disableAutoView:i}=this.props;return t&&this.shouldRenderExperience()?"function"==typeof e?e({experience:t,complete:this.complete,dismiss:this.dismiss,...i?{view:this.view}:Object.freeze({})}):n.Children.only(e):null}}a(l,"defaultProps",{eligibleIds:[],eligibleTypes:[]});const c=(0,r.connect)((({experiences:e},t)=>({experience:t.experience||(t.placementId?e[t.placementId]:void 0)})),(e=>({completeExperience:(t,i,n,r)=>e((0,o.CK)(t,i,n,!1,{},r)),completeExperienceObject:(t,i)=>e((0,s.Tl)(t,i)),dismissExperience:(t,i,n,r)=>e((0,o.Qu)(t,i,n,void 0,r)),dismissExperienceObject:t=>e((0,s.CF)(t)),viewExperience:(t,i,n)=>e((0,o.UT)(t,i,!1,!1,void 0,n)),viewExperienceObject:t=>e((0,s.dy)(t))})))(l)},333312:(e,t,i)=>{i.r(t),i.d(t,{default:()=>u});var n=i(667294),r=i(121093),o=i(570470),s=i(883119),a=i(785893);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends n.PureComponent{constructor(...e){super(...e),l(this,"onScroll",(()=>{const{dismiss:e}=this.props;this.dismissed||this.timer||(this.timer=setTimeout((()=>{e(),this.dismissed=!0,this.timer=void 0}),3e3))})),l(this,"dismissed",!1)}componentDidMount(){window.addEventListener("scroll",this.onScroll)}componentWillUnmount(){this.timer&&clearTimeout(this.timer)}render(){const{anchor:e,text:t,thumbnails:i,idealDirection:n}=this.props,r=i.slice(-3);return(0,a.jsx)(s.J2,{anchor:e,color:"white",idealDirection:n,onDismiss:this.onScroll,shouldFocus:!1,size:"md",children:(0,a.jsxs)(s.xu,{display:"flex",alignContent:"center",justifyContent:"between",padding:3,width:"100%",children:[(0,a.jsx)(s.xu,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",marginStart:-3,paddingX:3,children:(0,a.jsx)(s.xv,{color:"default",weight:"bold",children:t})}),(0,a.jsx)(s.xu,{display:"flex",marginEnd:-2,paddingX:2,children:r.map((e=>(0,a.jsx)(s.xu,{height:60,width:50,paddingX:1,children:(0,a.jsx)(s.zd,{rounding:2,height:60,children:(0,a.jsx)(s.Ee,{alt:"More Ideas Thumbnail",color:"rgb(86, 152, 239)",fit:"cover",naturalHeight:60,naturalWidth:60,src:e})})},e)))})]})})}}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class u extends n.Component{constructor(...e){super(...e),d(this,"state",{paused:!1}),d(this,"handlePulsarClick",((e,t)=>{e?this.setState({paused:!0}):t()}))}componentWillUnmount(){clearTimeout(this.timer)}setDefaultPulsarTooltip(e){const t=e=>!(null==e);e.has_pulsar=!t(e.has_pulsar)||e.has_pulsar,e.has_tooltip=!t(e.has_tooltip)||e.has_tooltip}getText(e,t,i){return t&&e.text.replace("{boardName}",t),i?i(e):e.text}render(){const{anchor:e,customWrapper:t,experienceIds:i,boardTextOverride:l,flyoutSize:d,fontSize:u,hasFullWidthButton:h=!0,idealDirection:p,useMasonryFlyout:m,noClickToDismiss:v,onClickComplete:g,onClickDismiss:f,placementId:y,positionRelativeToAnchor:_,shouldTimeoutDismiss:x,showCaret:b,textAlign:w,textOverflow:S,textOverrideFn:C,textWeight:E,customizedComplete:P,pulsarZIndex:T}=this.props,I=t||(({children:e})=>m?(0,a.jsx)(s.mh,{children:e}):e),j="blue";return(0,a.jsx)(r.Z,{eligibleIds:i,placementId:y,eligibleTypes:[8],children:({complete:t,dismiss:i,experience:{display_data:r}})=>(this.setDefaultPulsarTooltip(r),r.has_pulsar||r.has_tooltip?(x&&r.disappearTime&&r.disappearTime>0&&(this.timer=setTimeout((()=>(i(),null)),r.disappearTime)),(0,a.jsxs)(n.Fragment,{children:[r.has_pulsar&&(0,a.jsx)(o.Z,{anchor:e,onTouch:()=>this.handlePulsarClick(r.has_tooltip,t),paused:this.state.paused,zIndex:T&&T.index()}),r.has_tooltip&&(!r.has_pulsar||this.state.paused)&&(r.thumbnail_urls?(0,a.jsx)(c,{anchor:e,dismiss:i,idealDirection:p||"down",text:r.text,thumbnails:r.thumbnail_urls}):(0,a.jsx)(I,{children:(0,a.jsx)(s.J2,{anchor:e,color:j,idealDirection:p||"down",onDismiss:v?()=>{}:i,positionRelativeToAnchor:!m&&_,shouldFocus:!1,showCaret:b,size:d,children:(0,a.jsxs)(s.xu,{column:12,padding:3,children:[(0,a.jsxs)(s.xv,{align:"right"===w?"end":w,color:"inverse",overflow:S,size:u,weight:E||"bold",children:[this.getText(r,l,C),r.secondary_cta_link&&(0,a.jsx)(s.xu,{display:"inlineBlock",marginStart:1,children:(0,a.jsx)(s.xv,{size:u,weight:"bold",color:"inverse",children:(0,a.jsx)(s.rU,{inline:!0,target:"blank",href:r.secondary_cta_link.url,underline:"hover",children:r.secondary_cta_link.text})})})]}),r.sub_text&&(0,a.jsx)(s.xu,{paddingY:2,children:(0,a.jsx)(s.xv,{color:"inverse",size:u,children:r.sub_text})}),(r.dismiss_button_text||r.complete_button_text)&&(0,a.jsxs)(s.xu,{display:"flex",alignItems:"center",marginTop:2,children:[r.dismiss_button_text&&(0,a.jsx)(s.xu,{marginEnd:1,column:6,children:(0,a.jsx)(s.zx,{fullWidth:h,color:j,onClick:()=>{f&&f(),i()},size:"md",text:r.dismiss_button_text})}),r.complete_button_text&&(0,a.jsx)(s.xu,{column:r.dismiss_button_text?6:12,children:P?(0,a.jsx)(s.iP,{fullHeight:!0,onTap:()=>{t(),g&&g()},rounding:2,children:(0,a.jsx)(s.xu,{display:"flex",color:"default",padding:2,rounding:2,justifyContent:"center",dangerouslySetInlineStyle:{__style:{padding:"10px"}},children:(0,a.jsx)(s.xv,{color:"shopping",weight:"bold",children:r.complete_button_text})})}):(0,a.jsx)(s.kC,{justifyContent:"center",children:(0,a.jsx)(s.zx,{fullWidth:h,color:"white",href:r.complete_button_cta_url,role:r.complete_button_cta_url?"link":"button",size:"md",target:r.complete_button_cta_url?"blank":null,text:r.complete_button_text,onClick:()=>{t(),g&&g()}})})})]})]})})}))]})):(t(),null))})}}d(u,"defaultProps",{fontSize:"300",positionRelativeToAnchor:!0})},332611:(e,t,i)=>{i.d(t,{CK:()=>h,N:()=>f,Qu:()=>p,UT:()=>u,YX:()=>g,d9:()=>m,fO:()=>l,kd:()=>v,pz:()=>c});var n=i(6637),r=i(764990),o=i(172071),s=i(957191);let a;const l=(e,t)=>i=>{const r=t?{extra_context:e,targeting:t}:{extra_context:e};return n.Z.create("UserExperiencePlatformResource",r).callGet().then((e=>e.resource_response?i((0,s.OD)(e.resource_response.data)):void 0))},c=(e,t,i,o)=>(l,c)=>{if(t)return Promise.resolve();if(o&&(a=o),1===e.length){const t=e[0],n=c().experiences[t],o=(null==n?void 0:n.extraContext)||null;if(JSON.stringify(o)===JSON.stringify(i)||(0,r.E3)(n)&&!(i&&Object.keys(i).length>0))return Promise.resolve()}return n.Z.create("UserExperienceResource",{placement_ids:e,extra_context:i||null,targeting:o}).callGet().then((e=>e.resource_response?l((0,s.cL)(e.resource_response.data)):void 0))},d=(e,t)=>(i,r,o,c=!1,d,u)=>(h,p)=>{const{experiences:m,experiencesMulti:v}=p();let g=null,f=!0;var y;c||(f=m[i]&&m[i].experience_id===r,g=f?m[i]:Array.isArray(v[i])&&(null===(y=v[i])||void 0===y?void 0:y.find((e=>e.experience_id===r))));if(g&&g.experience_id===r||c&&i&&r){const c=n.Z.create(e,{placed_experience_id:`${i}%3A${r}`,extra_context:null!=d?d:{},targeting:u}),p=f?s.Yb:s.xW;switch(t){case"dismissed":return c.callDelete().then((()=>{h(p(i,r,t)),h(l(void 0,a))}));case"completed":return c.callUpdate().then((()=>{o||(h(p(i,r,t)),h(l(void 0,a)))}));case"viewed":return h(p(i,r,t)),c.callUpdate().then((()=>{1000162===i&&h(l())}));case"completedWithoutHomefeed":return c.callUpdate().then((()=>{o||h(p(i,r,t))}));default:return Promise.resolve()}}return Promise.resolve()},u=d("UserExperienceViewedResource","viewed"),h=d("UserExperienceCompletedResource","completed"),p=d("UserExperienceResource","dismissed"),m=d("UserExperienceCompletedResource","completedWithoutHomefeed"),v=(e,t)=>(i,r)=>{const{experiences:s}=r(),a=s[e];a&&a.triggerable_placed_exps&&a.triggerable_placed_exps.length&&a.triggerable_placed_exps.forEach((i=>{const[,r]=i.split(":");let s=t;a.metadata&&a.metadata[r]&&(s=Object.assign({},t,a.metadata[r])),n.Z.create("UserExperienceTriggerResource",{placed_experience_id:i.replace(":","%3A"),extra_context:s}).callUpdate().then((()=>{((e,t,i={})=>{o.Z.increment(`${e}.${t}`,1,i)})("experienceservice","experimentTriggerCall.1",{placement_id:e,experience_id:r})}))}))},g=e=>(t,i)=>{t(v(e));const{experiences:n}=i();return n[e]},f=(e,t,i)=>n=>{i&&(a=i),n(v(e,t)),t&&Object.keys(t).length>0&&n(c([e],!1,t,i))}},242923:(e,t,i)=>{i.d(t,{CF:()=>a,Tl:()=>s,dy:()=>l});var n=i(6637),r=i(332611);const o=(e,t)=>(i,o)=>s=>{if(i&&i.id){const a=n.Z.create(e,{placed_experience_id:i.id,extra_context:{}});switch(t){case"dismissed":a.callDelete().then((()=>{s((0,r.fO)())}));break;case"completed":a.callUpdate().then((()=>{o||s((0,r.fO)())}));break;case"viewed":a.callUpdate()}}},s=o("UserExperienceCompletedResource","completed"),a=o("UserExperienceResource","dismissed"),l=o("UserExperienceViewedResource","viewed")},764990:(e,t,i)=>{function n(e){return!!e&&0!==e.type}i.d(t,{A0:()=>o,E3:()=>n,MQ:()=>r});const r=(e,t,i)=>{const r=e[i];return t[i]&&n(r)?r:null};function o(e){var t;return null===(t=e.display_data)||void 0===t?void 0:t.anchor}},207737:(e,t,i)=>{i.d(t,{$S:()=>n,V$:()=>r,_4:()=>s,iY:()=>a,mR:()=>o});const n="REFRESH_ALL_EXPERIENCES_MULTI",r="UPDATE_EXPERIENCE_MULTI",o="FETCH_EXPERIENCES",s="REFRESH_ALL_EXPERIENCES",a="UPDATE_EXPERIENCE"},957191:(e,t,i)=>{i.d(t,{NW:()=>s,OD:()=>l,Yb:()=>a,cL:()=>c,xW:()=>o});var n=i(6637),r=i(207737);const o=(e,t,i)=>({type:r.V$,payload:{placementId:e,experienceId:t,status:i}}),s=e=>t=>n.Z.create("UserExperiencePlatformResource",{extra_context:e,multiExperiencePlatform:!0}).callGet().then((e=>{return e.resource_response?t((i=e.resource_response.data,{type:r.$S,payload:{experiencesMulti:i}})):void 0;var i})),a=(e,t,i)=>({type:r.iY,payload:{placementId:e,experienceId:t,status:i}}),l=e=>({type:r._4,payload:{experiences:e}}),c=e=>({type:r.mR,payload:{experiences:e}})},570470:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(667294),r=i(883119),o=i(785893);function s({anchor:e,children:t,zIndex:i}){const s=(0,n.useRef)(null),[a,l]=(0,n.useState)(0),[c,d]=(0,n.useState)(0),{height:u,width:h}=e.getBoundingClientRect();return(0,n.useEffect)((()=>{const{current:t}=s;if(e&&t){const{height:e,width:i}=t.getBoundingClientRect(),{horizontalOffset:n,verticalOffset:r}=((e,t,i,n)=>({horizontalOffset:-(n/2-t/2),verticalOffset:-(i/2-e/2)}))(u,h,e,i);l(n),d(r)}})),(0,o.jsx)(r.xu,{position:"absolute",zIndex:i?new r.Ry(i):void 0,dangerouslySetInlineStyle:{__style:{left:a,top:c}},ref:s,children:t})}const a=function(e){const{anchor:t,onTouch:i,onMouseEnter:n,paused:a,size:l,zIndex:c}=e;return t?(0,o.jsx)(s,{anchor:t,zIndex:c,children:(0,o.jsx)(r.iP,{fullWidth:!1,onTap:({event:e})=>i(e),onMouseEnter:n,rounding:"circle",children:(0,o.jsx)(r.o3,{paused:a,size:l})})}):null}},116303:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(883119),r=i(785893);const o=(e,t)=>{const i=null==e?void 0:e.includes("images/user/default");return Boolean(i&&t)};function s({accessibilityLabel:e,name:t,outline:i,size:s,src:a,verified:l}){return(0,r.jsx)(n.qE,{accessibilityLabel:e,name:t,outline:i,size:s,src:o(a,t)?void 0:a,verified:l})}},572551:(e,t,i)=>{i.r(t),i.d(t,{default:()=>f});var n=i(667294),r=i(319915),o=i(757184),s=i(317254),a=i(463076);function l(e=300,t=16,i=2){let n=`\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n  max-width: ${t*e}\n}\n\n.gridCentered .static,\n.gridCentered .Masonry-Premount .Collection-Item {\n  position: absolute !important;\n  visibility: hidden !important;\n}\n.gridCentered .Masonry-Premount,\n.gridCentered .Masonry-Premount .AutoSizer,\n.gridCentered .Masonry-Premount .Collection {\n  width: auto !important;\n}\n\n@media (min-width: ${t*e}px) {\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${t}),\n  .gridCentered .static:nth-child(-n+${t}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n\n  .gridCentered .Masonry-Premount .Collection-Item,\n  .gridCentered .static {\n    width: ${e}px !important;\n  }\n}\n`;for(let r=i;r<t+1;r+=1){n+=`\n@media (min-width: ${r===i?0:(r-1)*e}px) and (max-width: ${r*e-1}px) {\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${r}),\n  .gridCentered .static:nth-child(-n+${r}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n\n  .gridCentered .Masonry-Premount .Collection-Item,\n  .gridCentered .static {\n    width: calc(100% / ${r}) !important;\n  }\n}\n`}return n}var c=i(391254),d=i(883119),u=i(444445),h=i(785893);function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class m extends n.Component{constructor(...e){super(...e),p(this,"renderItem",(e=>{const{comp:t}=this.props,{gutterWidth:i,paddingBottom:n}=this.getGutters();return(0,h.jsx)("div",{style:{paddingBottom:n,paddingLeft:i/2,paddingRight:i/2},children:(0,h.jsx)(t,{...e})})}))}getGutters(){const{gutterWidth:e,paddingStyle:t}=this.props,i="simplified"===t,n=i?u.oX:e,r=i?16:6;return{gutterWidth:null!=n?n:u.ZZ,paddingBottom:r}}render(){const{columnWidth:e,flexible:t,items:i,layout:n,loadItems:r,masonryRef:o,measurementStore:s,scrollContainerRef:p,serverRender:m,virtualize:v,isGridCentered:g,minCols:f}=this.props,{gutterWidth:y}=this.getGutters(),_=m?"serverRenderedFlexible":"flexible";let x;g&&(x="gridCentered");const b=()=>(null==p?void 0:p.current)||window;return(0,h.jsxs)("div",{className:x,children:[m&&(0,h.jsx)(c.Z,{unsafeCSS:t?l((e||u.yF)+y,i.length||u.g5,f||u.yc):(0,a.Z)((e||u.yF)+y,i.length||u.g5,f||u.yc)}),(0,h.jsx)(d.Rk,{columnWidth:e+y,comp:this.renderItem,gutterWidth:0,layout:t?_:null!=n?n:"basic",items:i,loadItems:r,measurementStore:s,minCols:f,ref:e=>{o&&(o.current=e)},scrollContainer:b,virtualize:v})]})}}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}p(m,"defaultProps",{gutterWidth:u.ZZ,isGridCentered:!0,minCols:u.yc,paddingStyle:"simplified",virtualize:!0});class g extends n.Component{constructor(...e){super(...e),v(this,"renderItem",(e=>{const{comp:t}=this.props;return(0,h.jsx)(r.Z,{name:"MasonryPerfTimingItem",children:(0,h.jsx)(t,{...e})})})),v(this,"loadItems",(()=>{const{isFetching:e,loadItems:t}=this.props;!e&&t&&t()}))}render(){const{cacheKey:e,columnWidth:t,flexible:i,gutterWidth:n,isGridCentered:r,items:s,layout:a,masonryRef:l,minCols:c,paddingStyle:d,scrollContainerRef:u,serverRender:p,virtualize:v}=this.props;return(0,h.jsx)(m,{columnWidth:t,comp:this.renderItem,flexible:i,gutterWidth:n,isGridCentered:r,items:s,layout:a,loadItems:this.loadItems,masonryRef:l,measurementStore:(0,o.Z)(e),minCols:c,paddingStyle:d,scrollContainerRef:u,serverRender:p,virtualize:v})}}function f({cacheKey:e,columnWidth:t,comp:i,flexible:n,gutterWidth:r,isAtEnd:o,isFetching:a,isGridCentered:l=!0,isLoaded:c,items:d,pinData:u,layout:p,loadItems:m,masonryRef:v,minCols:f,paddingStyle:y,scrollContainerRef:_,serverRender:x=!0,virtualize:b=!0,includeBackgroundImages:w,includeVideos:S}){return(0,h.jsx)(s.Z,{isAtEndOfFeed:o,pinData:u,itemCount:d.length,includeBackgroundImages:w,includeVideos:S,children:(0,h.jsx)(g,{cacheKey:e,columnWidth:t,comp:i,flexible:n,gutterWidth:r,isFetching:a,isGridCentered:l,items:d,layout:p,loadItems:m,masonryRef:v,minCols:f,paddingStyle:y,scrollContainerRef:_,serverRender:x,virtualize:b})})}},757184:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(883119);const r={};function o(e){if(null!=e)return r[e]&&r[e].screenWidth===window.innerWidth||(r[e]={screenWidth:window.innerWidth,cache:n.Rk.createMeasurementStore()}),r[e].cache}},463076:(e,t,i)=>{function n(e=236,t=16,i=2){let n="\n.gridCentered {\n  margin-left: auto;\n  margin-right: auto;\n}\n.gridCentered .static,\n.gridCentered .Masonry-Premount .Collection-Item {\n  position: absolute;\n  visibility: hidden;\n}\n.gridCentered .Masonry-Premount,\n.gridCentered .Masonry-Premount .AutoSizer,\n.gridCentered .Masonry-Premount .Collection {\n  width: auto !important;\n}\n";for(let r=i;r<t+1;r+=1){n+=`\n@media (min-width: ${r===i?0:r*e}px) and (max-width: ${(r+1)*e-1}px) {\n  .gridCentered {\n    width: ${r*e}px;\n  }\n  .gridCentered .Masonry-Premount .Collection-Item:nth-child(-n+${r}),\n  .gridCentered .static:nth-child(-n+${r}) {\n    position: static !important;\n    visibility: visible !important;\n    float: left;\n    display: block;\n  }\n}\n`}return n}i.d(t,{Z:()=>n})},499128:(e,t,i)=>{i.d(t,{UZ:()=>c,Vg:()=>l,ZP:()=>d});var n=i(667294),r=i(829407),o=i(50286),s=i(883119),a=i(785893);const l=200,c=({deviceType:e,hiding:t,visible:i})=>({marginTop:"desktop"===e?10:0,opacity:0,position:"relative",transform:"desktop"===e?"translateY(200px)":"translateY(-200px)",transition:"opacity 0.1s ease-in-out",visibility:"hidden",pointerEvents:"auto",...i?{opacity:1,transform:"translateY(0)",transition:"all 0.7s cubic-bezier(.19, 1.15, .48, 1)",visibility:"visible"}:{},...i&&t?{opacity:0,transform:"scale(1.1)",transition:"opacity transform 0.2s"}:{}});function d({button:e,dataTestId:t,duration:i=2e3,href:d,iconThumbnail:u,imageUrl:h,onClick:p,onHide:m,openNewPage:v,text:g,thumbnailShape:f="square",variant:y="default"}){const _=(0,o.ZP)(),[x,b]=(0,n.useState)(!1),[w,S]=(0,n.useState)(!1),C=(0,n.useRef)(),E=()=>{b(!0),C.current=setTimeout(m,l)},P=()=>{C.current&&clearTimeout(C.current)},T=()=>{C.current=setTimeout(E,i)};(0,r.Z)((()=>(setTimeout((()=>S(!0)),100),T(),P)));const I="string"==typeof g?g:`${g[0]} ${g[1]}`,j=h?(0,a.jsx)(s.xu,{height:48,overflow:"hidden",width:48,children:(0,a.jsx)(s.Ee,{alt:I,fit:"cover",naturalHeight:1,naturalWidth:1,src:h})}):void 0,R=(0,a.jsx)(s.FN,{button:e,text:g,thumbnail:null!=u?u:j,thumbnailShape:f,variant:y});return(0,a.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{...c({deviceType:_,hiding:x,visible:w})}},"data-test-id":null!=t?t:"toast",onMouseEnter:P,onMouseLeave:T,children:d?(0,a.jsx)(s.iP,{role:"link",href:d,onTap:({event:e})=>null==p?void 0:p(e),target:v?"blank":null,rounding:"pill",children:R}):R})}},694379:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(892819),r=i(780280),o=i(785893);const s=({currency:e,maximumFractionDigits:t,minimumFractionDigits:i,shortform:s,shortformMaximumFractionDigits:a,formatStyle:l,uplimit:c,value:d})=>{const u=(0,n.Z)();return(0,o.jsx)(r.LC,{children:n=>u(n.locale||"en-US",d,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:i,shortform:s,shortform_maximum_fraction_digits:a,style:l,uplimit:c})})}},892819:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(66699),r=i(898781);const o=(e,t)=>{const i=t||0,n=10**i,r=+(i?e*n:e).toFixed(8),o=Math.floor(r),s=r-o,a=s>.5-1e-8&&s<.5+1e-8?o%2==0?o:o+1:Math.round(r);return i?a/n:a},s=e=>{try{(0).toLocaleString([e])}catch(t){return!1}return!0};function a(){const e=(0,r.ZP)();return(t,i,r)=>{let a=0,l=0;const c=r&&r.style||void 0,d=r&&r.shortform||!1,u=r&&r.uplimit||void 0,h=r&&r.currency||void 0,p=!!u&&i>=u,m=u&&p?u:i;if("currency"===c){const{minimumFractionDigits:e,maximumFractionDigits:i}=((e,t)=>{if(t){const{minimumFractionDigits:i,maximumFractionDigits:n}=new Intl.NumberFormat(e,{style:"currency",currency:t}).resolvedOptions();if(void 0!==i&&void 0!==n)return{minimumFractionDigits:i,maximumFractionDigits:n}}return{minimumFractionDigits:2,maximumFractionDigits:2}})(t,h);a=void 0===r||void 0===r.maximum_fraction_digits?i:r.maximum_fraction_digits,l=void 0===r||void 0===r.minimum_fraction_digits?e:r.minimum_fraction_digits}else a=void 0===r||void 0===r.maximum_fraction_digits?0:r.maximum_fraction_digits,l=void 0===r||void 0===r.minimum_fraction_digits?0:r.minimum_fraction_digits;if(d&&m>999&&(a=void 0===r||void 0===r.shortform_maximum_fraction_digits?2:r.shortform_maximum_fraction_digits,l=0),a<l)return String(m);let v=m,g="";const f=[{"100M":{value:1e8,localeKey:e._('億', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.')}},{"10k":{value:1e4,localeKey:e._('万', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.')}}],y=[{b:{value:1e9,localeKey:e._('B', 'Abbreviation for one billion.', 'Abbreviation for one billion.')}},{m:{value:1e6,localeKey:e._('M', 'Abbreviation for one million.', 'Abbreviation for one million.')}},{k:{value:1e3,localeKey:e._('k', 'Abbreviation for one thousand.', 'Abbreviation for one thousand.')}}],_=/^zh|ja|ko/.test(t);if(d&&m>999){const e=_?f:y;for(let t=0;t<e.length;t+=1){const i=Object.keys(e[t])[0],n=e[t][i].value;if(m>=n){v=o(m/n*Math.pow(10,a))/Math.pow(10,a),g=e[t][i].localeKey;break}}}if(null==v)return"";const x=v.toLocaleString([s(t)&&"ar-SA"!==t?t:"en-US"],(({maximumFractionDigits:e,minimumFractionDigits:t,style:i,currency:n})=>{const r={maximumFractionDigits:e,minimumFractionDigits:t};return i?{...r,style:i,..."currency"===i?{currency:n,currencyDisplay:"symbol"}:{}}:r})({maximumFractionDigits:a,minimumFractionDigits:l,currency:h,style:c}));return g&&g.length>0?(0,n.Z)(e._('{{formattedNumber}}{{numberSuffix}}', 'i18n.usePrettyNumberFormat.prettyNumberFormat', 'String used to concatenate formatted number and localized number suffix'),{formattedNumber:x,numberSuffix:g})+(p?"+":""):x+(p?"+":"")}}},12610:(e,t,i)=>{function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{Z3:()=>h,LU:()=>p,ZP:()=>m});const r=1e6,o=window.location.search.includes("debug_impressions=1")||document.cookie&&document.cookie.indexOf("debug_impressions=1")>-1,s={paused:"Pause",resumed:"Resume",stopped:"Flush",enter:"Enter viewport",exit:"Exit viewport"},a={},l={background:"#FF8A8A",transform:"scale(.98)"},c={init:e=>({transform:`scale(${a[e]?.8:.99})`,transition:"transform .2s ease-in-out",background:"#8E8E8E"}),[s.enter]:{background:"#A0DCC8",transform:"scale(.99)"},[s.exit]:l,[s.stopped]:l,[s.paused]:l,[s.resumed]:{background:"#0FA573",transform:"scale(.99)"}};class d{constructor(e){n(this,"setMutationObserver",(e=>(this.mutationObserver=e,this))),n(this,"startMutationObserver",(e=>{this.mutationObserver&&this.mutationObserver.observe(this.node,e)})),n(this,"stopMutationObserver",(()=>{this.mutationObserver&&this.mutationObserver.disconnect()})),n(this,"handleIntersectionChange",(e=>{const t=e.intersectionRatio>0||e.isIntersecting;if(t&&!this.inViewport){const e=Date.now();this.startTime=e,this._debug(s.enter,{startTime:e,node:this.node}),this.enterCallbacks.forEach((e=>e()))}else!t&&this.inViewport&&(this._debug(s.exit,!0),this.exitCallbacks.forEach((e=>e(this.toJSON()))));this.inViewport=t})),this.enterCallbacks=[],this.exitCallbacks=[],this.inViewport=!1,this.node=e,this.startTime=0,this.debugId=""}onEnterViewport(e){return this.enterCallbacks.push(e),this}onExitViewport(e){return this.exitCallbacks.push(e),this}setDebugId(e){return this.debugId=e,o&&Object.assign(this.node.style,c.init(e)),this}pause(){return this.inViewport&&(this._debug(s.paused,!0),this.exitCallbacks.forEach((e=>e(this.toJSON())))),this}resume(){if(this.inViewport){const e=Date.now();this._debug(s.resumed,{startTime:e}),this.startTime=e}return this}stop(e){return this.inViewport&&(this._debug(s.stopped,!0),this.exitCallbacks.forEach((t=>t(this.toJSON(e))))),this}toJSON(e=""){return{startTime:this.startTime*r,endTime:Date.now()*r,forcedExit:e}}toDebugJSON(){return{pinID:this.debugId,startTime:this.startTime,endTime:Date.now(),duration:(Date.now()-this.startTime)/1e3+" seconds"}}_debug(e,t){if(o)switch(window.console.log(`📌 ${e} -- ${this.debugId}`),!0===t&&window.console.log(this.toDebugJSON()),"object"==typeof t&&window.console.log(t),c[e]&&Object.assign(this.node.style,c[e]),e){case s.flushed:case s.paused:case s.exit:a[this.debugId]=!0}}}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const h=!0,p=!1;class m{constructor(){u(this,"_delegateChange",(e=>{e.forEach((e=>{const t=this.activeImpressions.get(e.target);t&&t.handleIntersectionChange(e)}))})),u(this,"_handleMutations",((e,t)=>{const i=this.mutationObservers.get(t);i&&i.offsetHeight<1&&i&&this.stop(i,"removed")})),this.activeImpressions=new Map,this.mutationObservers=new Map,this.bottomHeight=0,this.bottomObstructions=new Set,this.pausePriority=p,this.observer=new window.IntersectionObserver(this._delegateChange),this.paused=!1,this.topHeight=0,this.topObstructions=new Set,this.inExperiment=!1}setExperimentStatus(e){this.inExperiment!==e&&(this.inExperiment=e)}stop(e,t=""){const i=this.activeImpressions.get(e);i&&(i.stop(t),this.mutationObservers.delete(i.mutationObserver),i.stopMutationObserver(),this.activeImpressions.delete(e),this.observer.unobserve(e))}start(e){let t=this.activeImpressions.get(e);if(!t){t=new d(e),this.activeImpressions.set(e,t),this.observer.observe(e);const i=(e,t)=>this._handleMutations(e,t);t.setMutationObserver(new window.MutationObserver(i)),this.mutationObservers.set(t.mutationObserver,e),t.startMutationObserver({subtree:!0,attributes:!0,attributeFilter:["style"]})}return t}pause(e=h){this.paused||(Array.from(this.activeImpressions.values()).forEach((e=>e.pause())),this.paused=!0,this.pausePriority===p&&(this.pausePriority=e))}resume(e=h){e===p&&this.pausePriority===h||this.paused&&(Array.from(this.activeImpressions.values()).forEach((e=>e.resume())),this.paused=!1,this.pausePriority=p)}addObstruction(e,t){"top"===e?this.topObstructions.add(t):"bottom"===e&&this.bottomObstructions.add(t),this._calculateRootMargins()}removeObstruction(e,t){"top"===e?this.topObstructions.delete(t):"bottom"===e&&this.bottomObstructions.delete(t),this._calculateRootMargins()}updateObstructions(){this._calculateRootMargins()}_calculateRootMargins(){const e=Array.from(this.topObstructions).reduce(((e,t)=>{const{bottom:i}=t.getBoundingClientRect();return i>e?i:e}),0),t=window.innerHeight-Array.from(this.bottomObstructions).reduce(((e,t)=>{const{top:i}=t.getBoundingClientRect();return i<e?i:e}),window.innerHeight);if(e!==this.topHeight||t!==this.bottomHeight){const i={rootMargin:`${-e}px 0px ${-t}px`};this.observer.disconnect(),this.observer=new window.IntersectionObserver(this._delegateChange,i),Array.from(this.activeImpressions.values()).forEach((e=>this.observer.observe(e.node))),this.topHeight=e,this.bottomHeight=t}}}},564194:(e,t,i)=>{i.d(t,{Z:()=>p});var n=i(667294),r=i(973935),o=i(834911),s=i(124580),a=i(407043),l=i(802201),c=i(785893);function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const u={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasImpressions",idType:"boardIdStr",eventType:10054},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpressions",idType:"storyIdStr",eventType:170},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127}};class h extends n.Component{constructor(e){super(e),d(this,"trackImpression",(()=>{try{this.node=(0,r.findDOMNode)(this),this.node instanceof HTMLElement&&this.impressionsFramework.start(this.node).onExitViewport(this.logImpression).setDebugId(this.props.loggingId||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}})),d(this,"logImpression",(e=>{const{carousel_data:t,closeupImpressionType:i,closeupNavigationType:n,componentType:r,contextLogData:o,elementType:s,impressionAuxFields:a,impressionType:l,loggingId:c,objectIdStr:d,slotIndex:h,trackCarousel:p,viewData:m,viewParameter:v,viewType:g,logContextEvent:f}=this.props,y=u[l],_=y.idType,x=e.forcedExit&&"removed"===e.forcedExit?0:void 0,b={endTime:e.endTime,[_]:c,slotIndex:h,time:e.startTime,renderDuration:e.endTime-e.startTime,type:i,...a,forcedExit:x};if(p||f({event_type:y.eventType,component:r,element:s,event_data:{[y.impressionType]:[b]},object_id_str:d,view_type:g,view_data:m||{},view_parameter:v,aux_data:{...o,closeup_navigation_type:n}}),t&&p){const{carousel_slots:e,index:i=0,id:n}=t;f({event_type:7352,component:r,event_data:{pinCarouselSlotImpressions:[{...b,carouselDataId:Number(n),carouselSlotId:(null==e?void 0:e[i])&&Number(e[i].id),slotIndex:i}]},object_id_str:d,view_type:g,view_data:m||{},view_parameter:v,aux_data:{...o}})}})),this.impressionsFramework=e.impressionsFramework||s.Z}componentDidMount(){this.props.inImpressionExp&&!this.impressionsFramework.inExperiment&&this.impressionsFramework.setExperimentStatus(!0),this.props.isPaused||this.trackImpression()}componentDidUpdate(e){e.isPaused&&!this.props.isPaused&&this.trackImpression()}componentWillUnmount(){this.node instanceof HTMLElement&&this.impressionsFramework.stop(this.node)}render(){return n.Children.only(this.props.children)}}function p(e){const{logContextEvent:t}=(0,a.v)(),{loggingId:i}=e,n=(0,l.AF)(),r=i?n[i]:{};return(0,c.jsx)(h,{...e,logContextEvent:t,carousel_data:r&&(0,o.Z)({carouselData:r.carousel_data,images:r.images,richMetadata:r.rich_metadata,richSummary:r.rich_summary})})}},124580:(e,t,i)=>{i.d(t,{Z:()=>n});const n=new(i(12610).ZP)},307061:(e,t,i)=>{i.d(t,{Z:()=>n});const n=function(e){return function(t){return null!=t?e(t):null}}},623568:(e,t,i)=>{i.d(t,{Js:()=>o,NK:()=>g,Nc:()=>f,VX:()=>s,Zt:()=>m,_J:()=>c,_Q:()=>r,cL:()=>h,dZ:()=>x,hb:()=>v,hy:()=>l,iR:()=>n,jL:()=>a,o:()=>y,pU:()=>_,rM:()=>p,sV:()=>d,sY:()=>u});const n=e=>!!e&&!!e.video_list,r=e=>!!e.promoted_is_lead_ad,o=(e,t)=>{let i=e&&e.url?e.url.split("/")[1]:"";return t&&t.full_name&&(i=t.full_name),i},s=e=>{var t;return e.rich_summary&&e.rich_summary.products&&e.rich_summary.products.length>0||(null===(t=e.rich_metadata)||void 0===t?void 0:t.products)&&e.rich_metadata.products.length>0||!1},a=e=>!!e.promoter&&!e.is_downstream_promotion,l=e=>!!e,c=e=>!!e.video_status&&5!==e.video_status,d=e=>["email","messages","deep_linking"].includes(e),u=e=>!!e&&"gif"===e,h=({embedSrc:e,embedSubtype:t,embedType:i})=>!!e&&!u(i)&&!(e=>"pinstory"===e)(t),p=({link:e,mobileLink:t,trackedLink:i})=>!t&&!i&&!e,m=({link:e,mobileLink:t,origImageUrl:i,trackedLink:n})=>t||n||e||i||"",v=({isStoryPin:e,isVideoPin:t})=>e?"storyPin":t?"video":"image",g=(e,t)=>({deeplinkUri:{android:`pin/${e}/repin`,iOS:`repin/${e}`},mwebUri:{pathname:`/pin/${e}/repin/`,state:{trackingParams:t.state?t.state.trackingParams:""}}});function f(e){var t,i;return!n(e.videos)&&!l(e.story_pin_data_id)&&0!==Object.keys((null===(t=e.aggregated_pin_data)||void 0===t||null===(i=t.creator_analytics)||void 0===i?void 0:i["30d_realtime"])||{}).length}function y(e){var t;return 0!==Object.keys((null===(t=e.creator_analytics)||void 0===t?void 0:t["30d_realtime"])||{}).length}function _(e){var t;return 0!==Object.keys((null===(t=e.public_creator_analytics)||void 0===t?void 0:t.all_time_realtime)||{}).length}function x(e){var t,i;return!(null===(t=e.creator_analytics)||void 0===t||null===(i=t["30d_realtime"])||void 0===i||!i.is_realtime)}},802933:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(0,i(307061).Z)((e=>e.pin&&e.pin.id?{...e,id:e.id,aggregatedPinData:e.pin.aggregated_pin_data}:null))},79830:(e,t,i)=>{i.d(t,{I6:()=>p,Ib:()=>g,PF:()=>h,Tr:()=>f,W7:()=>o,YC:()=>l,a2:()=>u,a7:()=>d,h5:()=>n,hC:()=>s,lA:()=>y,n$:()=>r,oo:()=>m,s7:()=>c,vI:()=>a,vq:()=>v});const n="MULTIPLE_ACCOUNTS",r="MULTIPLE_ACCOUNTS_GROUP",o="account_switcher_flyout",s="account_switcher_modal",a="vmp_account_switcher_modal",l="account_recovery",c="closeup",d="google_one_tap_modal",u="hybrid_clickthrough",h="pin_image",p="response_flyout",m="unauth_header",v="facebook",g="twitter",f="google",y="microsoft"},83969:(e,t,i)=>{i.d(t,{Fm:()=>s,OY:()=>l,PL:()=>d,Px:()=>a,ru:()=>c});var n=i(713930),r=i(966113),o=i(867820);const s=()=>{var e,t,i;return null===(e=window)||void 0===e||null===(t=e.google)||void 0===t||null===(i=t.accounts)||void 0===i?void 0:i.id},a=e=>(0,n.Z)("https://accounts.google.com/gsi/client",null!=e&&e.unsafe?null:"GSI"),l=({autoSelect:e,itpSupport:t},i)=>{var n;null===(n=s())||void 0===n||n.initialize({auto_select:null!=e&&e,client_id:r.Z.settings.GPLUS_CLIENT_ID,callback:i,cancel_on_tap_outside:!1,context:"use",itp_support:t})},c=({buttonRef:e,isDesktop:t})=>{const i=s();if(i&&e.current){const t=e.current.offsetWidth;i.renderButton(e.current,{size:"large",shape:"pill",text:"continue_with",theme:"outline",width:t+"px"})}else(0,o.My)((t?"unauth_web":"unauth_mweb")+".gsi_button.not_initialized")},d=e=>"auto"===e?"AUTO_LOGIN":e.startsWith("btn")?"SIGN_IN_WITH_GOOGLE_BUTTON":"ONE_TAP_PROMPT"},760372:(e,t,i)=>{i.d(t,{X:()=>n});const n="favorited"},317254:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(969853),r=i(667294),o=i(276602),s=i(543059);function a({children:e,isAtEndOfFeed:t,pinData:i,itemCount:a,includeBackgroundImages:l=!1,includeVideos:c=!1}){return(0,n.Z)({pinData:i,isAtEndOfFeed:t,includeBackgroundImages:l,includeVideos:c}),function(e){const t=(0,o.EV)(),i=(0,r.useRef)(null);(0,r.useEffect)((()=>{e!==i.current&&(i.current=e,t&&(0,s.ZP)(s.at))}),[!!t,e])}(a),e}},311560:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>{switch(e){case"BR":case"MX":case"AR":case"CL":case"CO":return"LatAm";case"US":return"US";default:return"OTHER"}}},886858:(e,t,i)=>{i.d(t,{Z:()=>s,k:()=>o});const n=new Set(["bookmarks","client_tracking_params","get_page_metadata","in_nux","invite_code","no_fetch_context_on_resource","original_referrer","source","top_level_source","top_level_source_depth"]),r=e=>!n.has(e)&&!e.startsWith("__track__");function o(e){return e.split(/([^=]+=[^=]+),/).filter(Boolean).reduce(((e,t)=>{const[i,n]=t.split("=");return e[i]=JSON.parse(n),e}),{})}const s=e=>e?Object.keys("object"==typeof e&&e||{}).filter((e=>"string"==typeof e)).filter(r).sort().map((t=>`${t}=${JSON.stringify(null==e[t]?null:e[t])}`)).join(","):""},505920:(e,t,i)=>{i.d(t,{UZ:()=>u,Z8:()=>h,my:()=>p});var n=i(667294),r=(i(702664),i(6637)),o=i(425288),s=i(785893);function a(e,t,i){var n;const r=[...null!==(n=t[e][i.payload.name])&&void 0!==n?n:[],i.payload.handler],o={...t};return o[e]={...t[e],[i.payload.name]:r},o}function l(e,t,i){if(!t[e][i.payload.name])return t;const n=t[e][i.payload.name].filter((e=>e!==i.payload.handler)),r={...t};return r[e]={...t[e],[i.payload.name]:n},r}const{Provider:c,useHook:d}=(0,o.Z)("ResourceContext");function u({children:e}){const[{listeners:t,moreListeners:i},o]=(0,n.useReducer)(((e,t)=>{switch(t.type){case"addListener":return a("listeners",e,t);case"addMoreListener":return a("moreListeners",e,t);case"removeListener":return l("listeners",e,t);case"removeMoreListener":return l("moreListeners",e,t);default:return e}}),{listeners:{},moreListeners:{}});r.Z.fetchCompleteCallback=({resource:e,options:i,response:n,normalizedResponse:r,refresh:o,resourceSchema:s})=>{t[e]&&t[e].forEach((t=>t({isRefresh:o,normalizedResponse:r,options:i,schema:s,resource:e,response:n})))},r.Z.fetchMoreCompleteCallback=({resource:e,options:t,response:n,normalizedResponse:r,refresh:o,resourceSchema:s})=>{i[e]&&i[e].forEach((i=>i({isRefresh:o,normalizedResponse:r,options:t,schema:s,resource:e,response:n})))};const d=(0,n.useMemo)((()=>({listenerDispatch:o})),[]);return(0,s.jsx)(c,{value:d,children:e})}function h(e,t){const{listenerDispatch:i}=d();(0,n.useEffect)((()=>(i({type:"addListener",payload:{name:e,handler:t}}),()=>{i({type:"removeListener",payload:{name:e,handler:t}})})))}function p(e,t){const{listenerDispatch:i}=d();(0,n.useEffect)((()=>(i({type:"addMoreListener",payload:{name:e,handler:t}}),()=>{i({type:"removeMoreListener",payload:{name:e,handler:t}})})))}},379725:(e,t,i)=>{i.d(t,{U2:()=>l,bi:()=>c,v_:()=>d});var n=i(886858),r=i(6637),o=i(414327),s=i(718368);function a({fetchOptions:e,resource:t,retry:i}){return(l,c)=>{var d,u,h;const{bookmark:p,headers:m,options:v,refresh:g,schema:f}=e,y=(0,n.Z)(v);if(null!==(d=c().resources)&&void 0!==d&&null!==(u=d[t])&&void 0!==u&&null!==(h=u[y])&&void 0!==h&&h.fetching&&!i)return Promise.resolve();const _=i?i.bookmark:p,x=_?{...v,bookmarks:[_]}:v;return l((0,o.LQ)(t,v,!0)),r.Z.create(t,x).callGet(void 0,m).then((n=>{var c,d,u;const h=null===(c=n.resource_response)||void 0===c?void 0:c.data,[m]=n.bookmarks||[];if(Array.isArray(h)&&0===h.length&&m&&m!==s.q){const n=i?i.count:0;if(!(n>=s.s))return l(a({resource:t,fetchOptions:e,retry:{count:n+1,bookmark:m}}))}null===(d=r.Z.customDataManipulations)||void 0===d||d.call(r.Z,t,h);const{normalizedResponse:y,resourceSchema:_}=(null===(u=r.Z.normalizeResponse)||void 0===u?void 0:u.call(r.Z,{data:h,opts:{bookmark:p,options:v,schema:f},resource:t}))||{normalizedResponse:null,resourceSchema:void 0};return p?(l((0,o.Dm)(t,v,n,y,_)),r.Z.fetchMoreCompleteCallback&&r.Z.fetchMoreCompleteCallback({resource:t,options:v,response:n,normalizedResponse:y,refresh:g,resourceSchema:_})):(l((0,o.Sr)(t,v,n,y,g,_)),r.Z.fetchCompleteCallback&&r.Z.fetchCompleteCallback({resource:t,options:v,response:n,normalizedResponse:y,refresh:g,resourceSchema:_})),Promise.resolve()}),(e=>{l((0,o.Tl)(t,v,e))}))}}const l=(e,{bookmark:t,headers:i,options:n,schema:r})=>a({resource:e,fetchOptions:{bookmark:t,headers:i,options:n,refresh:!1,schema:r}}),c=(e,{headers:t,options:i,schema:n})=>a({resource:e,fetchOptions:{headers:t,options:i,refresh:!0,schema:n}});function d(e,t,i){return n=>{const{options:s}=t;return r.Z.create(e,s).callCreate().then((t=>{var r;if(null!==(r=t.resource_response)&&void 0!==r&&r.data){const r=t.resource_response.data,a=(null==i?void 0:i(r))||null;n((0,o.XM)(e,s,t,a))}return t}),(t=>(n((0,o.Tl)(e,s,t)),t)))}}},718368:(e,t,i)=>{i.d(t,{q:()=>n,s:()=>r});const n="-end-",r=10},338739:(e,t,i)=>{i.d(t,{AF:()=>n,KK:()=>r,aW:()=>a,cR:()=>o,se:()=>l,zP:()=>s});const n="CREATE_COMPLETE",r="FETCHING",o="FETCH_ERROR",s="FETCH_COMPLETE",a="FETCH_MORE_COMPLETE",l="RESOURCE_INVALIDATE"},414327:(e,t,i)=>{i.d(t,{Dm:()=>l,LQ:()=>o,Sr:()=>a,Tl:()=>s,XM:()=>r,jB:()=>c});var n=i(338739);function r(e,t,i,r){return{type:n.AF,payload:{resource:e,options:t,response:i,normalizedResponse:r}}}function o(e,t,i){return{type:n.KK,payload:{resource:e,options:t,isFetching:i}}}const s=(e,t,i)=>({type:n.cR,payload:{resource:e,options:t,error:i}});function a(e,t,i,r,o,s){return{type:n.zP,payload:{isRefresh:o,normalizedResponse:r,options:t,resource:e,response:i,schema:s}}}function l(e,t,i,r,o){return{type:n.aW,payload:{resource:e,options:t,response:i,normalizedResponse:r,schema:o}}}function c(e,t){return{type:n.se,payload:{resource:e,optionsOrOptionsKey:t}}}},784590:(e,t,i)=>{i.d(t,{Z:()=>u});var n=i(667294),r=i(702664),o=i(886858),s=i(718368),a=i(276775),l=i(780280),c=i(379725);const d={};function u({dangerouslyDisableFetch:e,enabledRouteRefresh:t,__unstableEnableSuspenseSupport:i,headers:u,name:h,noCache:p,options:m,schema:v}){const g=(0,r.useDispatch)(),f=(0,o.Z)(m),y=(0,n.useRef)(null),_=(0,n.useRef)(),x=(0,a.k6)(),b=x&&"POP"!==x.action,w=e=>(e[h]||d)[f]||d,S=(0,r.useSelector)((({resources:e})=>w(e).nextBookmark)),C=(0,r.useSelector)((({resources:e})=>w(e).data)),E=(0,r.useSelector)((({resources:e})=>w(e).auxData)),P=(0,r.useSelector)((({resources:e})=>w(e).error)),T=(0,r.useSelector)((({resources:e})=>Boolean(w(e).fetching))),I=Boolean(P)||void 0!==C,j=I&&!T&&S===s.q,R=Boolean(I&&t&&b&&!e),[k,A]=(0,n.useState)(R),D=(0,n.useCallback)((e=>{y.current=g((0,c.U2)(h,{options:m,schema:v,bookmark:e,headers:u}))}),[g,h,f,v,u]),O=()=>{y.current=g((0,c.bi)(h,{options:m,schema:v,headers:u}))},{isBot:M}=(0,l.B)(),L=()=>{if(!e&&_.current!==f){const e=void 0===_.current;_.current=f,!I&&!T||e&&P&&(({httpStatus:e})=>!e||e>=500)(P)?D():(!M&&p||R)&&O()}};(0,n.useEffect)((()=>{i||L()})),i&&L();const z=(0,n.useCallback)((()=>{e||(O(),A(!0))}),[e,c.bi,h,f,u,A]),Z=(0,n.useCallback)((()=>{!S||j||T||e||D(S)}),[e,D,S,j,T]);if(y.current)if(I&&!T)y.current=null;else if(i)throw y.current;const F=(0,n.useRef)({auxData:void 0,data:void 0,error:void 0,fetchMore:Z,isAtEnd:!1,isFetching:!1,isLoaded:!1,isRefreshing:!1,nextBookmark:void 0,refresh:z}),N={auxData:E,data:C,error:P,fetchMore:Z,isAtEnd:j,isFetching:T,isLoaded:I,isRefreshing:k,nextBookmark:S,refresh:z};return(0,r.shallowEqual)(N,F.current)||(!k||!F.current.data&&R||(0,r.shallowEqual)(N.data,F.current.data)||(N.isRefreshing=!1,A(!1)),F.current=N),F.current}},497997:(e,t,i)=>{i.d(t,{Z:()=>s});var n=i(667294);const r=(0,n.createContext)();var o=i(785893);function s({children:e,fallback:t,dangerouslyServerRenderForGraphQL:i=!1}){const s=t||null;(0,n.useContext)(r);return(0,o.jsx)(n.Suspense,{fallback:s,children:e})}},947599:(e,t,i)=>{i.d(t,{Z:()=>n});const n=i(497997).Z},985913:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(858142);const r=/\{\{\s*(\w+)\s*\}\}/g,o=(e,t)=>(0,n.Z)(r,e,t)},858791:(e,t,i)=>{i.d(t,{Z:()=>n});const n=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},858142:(e,t,i)=>{i.d(t,{Z:()=>n});const n=(e,t,i)=>t?t.replace(e,((e,t)=>i&&Object.prototype.hasOwnProperty.call(i,t)?i[t]:"")):""},66699:(e,t,i)=>{i.d(t,{Z:()=>o});var n=i(985913),r=i(858791);const o=(e,t)=>{const i={};return Object.keys(t).forEach((e=>{i[e]=t[e]?(0,r.Z)(t[e].toString()):""})),(0,n.Z)(e,i)}},70061:(e,t,i)=>{function n(e){return e.replace(/[_.-](\w|$)/g,((e,t)=>t.toUpperCase()))}i.d(t,{Z:()=>n})},784641:(e,t,i)=>{i.d(t,{E5:()=>c,T7:()=>n,Y_:()=>d,Yj:()=>s,d9:()=>h,nx:()=>u,pe:()=>a,xt:()=>l});i(883119);function n(e,t,i){const n=function(e){return 0===e||2===e?"trending":1===e?"best":"article"}(e),r=function(e){return e.toLowerCase().replace(/[.,\/#!?$%\^&\*+;:{}=\-_`~()\’'"]/g,"").trim().replace(/\s+/g,"-")}(t);return`/today/${n}/${encodeURIComponent(r)}/${i}/`}const r={"www.pinterest.com":"US","www.pinterest.co.uk":"GB","www.pinterest.ca":"CA","www.pinterest.com.au":"AU","br.pinterest.com":"BR","www.pinterest.com.mx":"MX","ar.pinterest.com":"AR","www.pinterest.cl":"CL","co.pinterest.com":"CO","www.pinterest.de":"DE","www.pinterest.at":"AT","www.pinterest.ch":"CH","www.pinterest.fr":"FR","in.pinterest.com":"IN","id.pinterest.com":"ID","www.pinterest.jp":"JP"},o={US:"en",GB:"en",CA:"en",AU:"en",BR:"pt",MX:"es",AR:"es",CL:"es",CO:"es",PE:"es",DE:"de",AT:"de",CH:"de",FR:"fr",IN:"en",ID:"id",JP:"ja",IT:"it"},s=(e,t)=>{const i=o[e];return!(null===i||i!==t&&!t.startsWith(i))},a=e=>r[e],l=(e,t,i)=>e||(t||i||""),c=(e,t)=>e||((null==t?void 0:t.origin_pinner)||(null==t?void 0:t.pinner)),d=e=>"todayarticle"===e.type,u=e=>Array.isArray(e)&&e.length>0&&e.every((e=>"story"===e.type)),h=e=>{var t,i;return(null!==(t=e.height)&&void 0!==t?t:1)/(null!==(i=e.width)&&void 0!==i?i:1)}},343341:(e,t,i)=>{i.d(t,{F9:()=>s,Zo:()=>r,nE:()=>o});var n=i(425288);const{Provider:r,Consumer:o,useHook:s}=(0,n.Z)("toastManagerContext")},149230:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(954931);const r=({url:e})=>!(!e||!e.match(/^https{0,1}:\/\//)||(0,n.Z)(e))},50286:(e,t,i)=>{i.d(t,{HG:()=>l,Mm:()=>r,Wb:()=>a,ZP:()=>c,ml:()=>s});var n=i(780280);function r(e){const{isMobile:t,isTablet:i}=e.userAgent;return i?"tablet":t?"phone":"desktop"}const o=()=>r((0,n.B)()),s=()=>"phone"===o(),a=()=>"tablet"===o(),l=()=>"desktop"===o(),c=o},829407:(e,t,i)=>{i.d(t,{Z:()=>r});var n=i(667294);const r=e=>{(0,n.useEffect)(e,[])}},215292:(e,t,i)=>{i.d(t,{Z:()=>s,q:()=>o});var n=i(667294);const r=()=>{const[e,t]=(0,n.useState)(!1),[i,r]=(0,n.useState)(!1),[o,s]=(0,n.useState)(!1);return{active:e,focused:i,hovered:o,onBlur:()=>{r(!1),t(!1)},onFocus:()=>r(!0),onMouseDown:()=>t(!0),onMouseEnter:()=>s(!0),onMouseLeave:()=>{s(!1),t(!1)},onMouseUp:()=>t(!1)}};function o({children:e}){return e(r())}const s=r},19121:(e,t,i)=>{i.d(t,{$:()=>r,Z:()=>s});var n=i(425288);const{Provider:r,useHook:o}=(0,n.Z)("viewer"),s=o},868565:(e,t,i)=>{function n(e){const t=e.videos&&e.videos.video_list&&Object.keys(e.videos.video_list).length>0?e.videos.video_list:null;return t?t.V_HLSV3_MOBILE||t.V_HLSV4||t.V_720P:null}i.d(t,{Z:()=>n})},121630:(e,t,i)=>{i.d(t,{e:()=>n});const n=e=>{if("undefined"==typeof window)return"";let t=0;const i=document.querySelector('[data-test-id="header"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}switch(e){case"AuthHomefeed":const e=document.querySelector('[data-root-margin="more-ideas-tabs"]');if(null!==e){const{height:i}=e.getBoundingClientRect();t+=i}break;case"SearchItem":const i=document.querySelector('[data-root-margin="search-improvements-bar"]');if(null!==i){const{height:e}=i.getBoundingClientRect();t+=e}const n=document.querySelector('[data-test-id="search-tab-bar"],[data-root-margin="search-one-bar"]');if(null!==n){const{height:e}=n.getBoundingClientRect();t+=e}}return-1*t+"px 0px 0px 0px"}},905723:(e,t,i)=>{i.d(t,{Z:()=>n});const n={V_HLSV4:"V_HLSV4",V_720P:"V_720P"}},523563:(e,t,i)=>{function n(e,t,i){return Object.keys(e).reduce(((i,n)=>i+Math.abs(e[n]-t[n])),0)<=i}i.d(t,{Z:()=>n})},802201:(e,t,i)=>{i.d(t,{AF:()=>a,S6:()=>l,_S:()=>c});var n=i(702664),r=i(425288),o=i(785893);const{Provider:s,useHook:a}=(0,r.Z)("Pins");function l(){const e=a();return t=>e[t]}function c({children:e}){const t=(0,n.useSelector)((({pins:e})=>e),n.shallowEqual);return(0,o.jsx)(s,{value:t,children:e})}},61877:(e,t,i)=>{i.d(t,{Cq:()=>p,Dk:()=>v,Fk:()=>o,bI:()=>r,fS:()=>h,gw:()=>d,j1:()=>u,km:()=>m,lI:()=>a,lJ:()=>s,mS:()=>c,qW:()=>l});var n=i(883119);const r=new n.Ry(0),o=new n.Ry(1),s=3,a=new n.Ry(s),l=2,c=new n.Ry(l),d=new n.Ry(3),u=new n.Ry(3),h=3,p=4,m=new n.Ry(5),v=new n.Ry(100)},993786:(e,t,i)=>{i.d(t,{Z:()=>d});var n=i(667294),r=i(966113),o=i(898781),s=i(883119),a=i(785893);const l={xs:12,sm:16,md:20,lg:24};function c({children:e}){const t=(0,o.ZP)();return(0,a.jsx)(s.u,{link:(0,a.jsx)(s.rU,{href:r.Z.settings.HELP_SHOPPING_WITH_PINTEREST,target:"blank",children:(0,a.jsx)(s.xv,{color:"inverse",size:"100",weight:"bold",children:t._('Learn more', 'verifiedBadge.tooltip.link', 'Learn more about Pinterest\'s Merchant Guidelines')})}),text:t._('This retailer meets Pinterest\'s Merchant Guidelines', 'merchantVerification.badge.tooltip', 'Badge indicating that a merchant or user is verified'),children:e})}function d({hasVerifiedIdentity:e,iconOnly:t,isVerifiedMerchant:i,showText:r,size:d}){const u=(0,o.ZP)(),h=(0,a.jsxs)(s.kC,{alignItems:"center",justifyContent:"start",children:[(0,a.jsx)(s.JO,{accessibilityLabel:u._('Merchant verification badge icon', 'merchantVerification.badge.icon', 'Badge indicating that a merchant or user is verified'),color:"shopping",icon:"workflow-status-ok",inline:!0,size:l[d]}),r&&(0,a.jsx)(s.xu,{marginStart:2,children:(0,a.jsx)(s.xv,{color:"shopping",inline:!0,weight:"bold",children:u._('Verified merchant', 'creator.header.verifiedMerchant', 'this merchant is a verified merchant')})})]});return(0,a.jsxs)(n.Fragment,{children:[i&&!t&&(0,a.jsx)(c,{children:h}),i&&t&&h,e&&!i&&(0,a.jsx)(s.JO,{accessibilityLabel:u._('Domain verification icon', 'domainVerification.badge.icon', 'Badge indicating that a merchant or user is verified'),color:"error",icon:"check-circle",size:l[d]})]})}},837727:(e,t,i)=>{i.d(t,{d:()=>n});const n={BOARD:"board",PIN:"pin",DID_IT:"did_it",PINNER:"pinner",USER:"user",TODAY_ARTICLE:"today_article",SEARCH:"search"}},844949:(e,t,i)=>{i.d(t,{X:()=>d,f:()=>c});var n=i(667294);function r(e=null,t){switch(t.type){case"REPORT_CONTENT_SHOW":return{id:t.payload.id,isProduct:t.payload.isProduct,isPromoted:t.payload.isPromoted,videoDuration:t.payload.videoDuration,viewParameter:t.payload.viewParameter,viewType:t.payload.viewType,type:t.payload.type};case"REPORT_CONTENT_DISMISS":return null;default:return e}}var o=i(425288),s=i(623568),a=i(785893);const{Provider:l,useHook:c}=(0,o.Z)("ReportData");function d({children:e}){const[t,i]=(0,n.useReducer)(r,null),o=(0,n.useCallback)((()=>i({type:"REPORT_CONTENT_DISMISS"})),[]),c=(0,n.useCallback)(((e,t,n)=>i({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:n,type:"aggregatedComment"}})),[]),d=(0,n.useCallback)(((e,t,n)=>i({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:n,type:"pin"}})),[]),u=(0,n.useCallback)(((e,t,n)=>{const{id:r,videos:o}=e,a=(0,s.VX)(e),l=(0,s.jL)(e);let c;if((0,s.iR)(o)&&o){const{video_list:e={}}=o,t=e[Object.keys(e)[0]];c=t&&t.duration}i({type:"REPORT_CONTENT_SHOW",payload:{id:r,isProduct:a,isPromoted:l,videoDuration:c,viewParameter:t,viewType:n,type:"pin"}})}),[]),h=(0,n.useMemo)((()=>({reportData:t,dismiss:o,reportComment:c,reportImage:d,reportPin:u})),[t,o,c,d,u]);return(0,a.jsx)(l,{value:h,children:e})}},304515:(e,t,i)=>{i.d(t,{Z:()=>a});var n=i(81226),r=i(898781),o=i(883119),s=i(785893);function a({duration:e}){const t=(0,r.ZP)();return(0,s.jsxs)(o.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:24,justifyContent:"center",paddingX:2,rounding:"pill",children:[(0,s.jsx)(o.JO,{accessibilityLabel:t._('Video camera icon', 'Video camera indicator icon for a Pin', 'Video camera indicator icon for a Pin'),color:"light",icon:"video-camera"}),(0,s.jsx)(o.xu,{marginStart:1,children:(0,s.jsx)(o.xv,{color:"inverse",size:"100",lineClamp:1,children:(0,n.Z)(e)})})]})}},572260:(e,t,i)=>{i.d(t,{ZP:()=>C});var n=i(667294),r=i(23279),o=i.n(r),s=i(722767);function a(e){const{eventData:{videoEvent:{videoDuration:t,startTime:i,endTime:n,videoStartTime:r,videoEndTime:o,isAudible:s,height:a,width:l,playbackState:c,quartile:d,quartilePercentValue:u,windowHeight:h,windowWidth:p,viewability:m}},component:v,objectId:g,view:f,viewParameter:y,..._}=e;return{component:v,object_id_str:g,view_type:f,view_parameter:y,aux_data:{..._},event_data:{videoEventData:{videoDuration:t,time:i,endTime:n,videoTime:r,endVideoTime:o,isAudible:s,height:a,width:l,playbackState:c,quartile:d,quartilePercentValue:u,windowHeight:h,windowWidth:p,viewability:m}}}}var l=i(121630),c=i(559230),d=i(407043),u=i(288273),h=i(883119),p=i(785893);function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const v=[0,.25,.5,.75,.95,.97],g=[0,.5,.8,.99,1],f="-64px 0px 0px 0px",y={rootMargin:f,threshold:g},_={rootMargin:f,threshold:c.iM},x=Object.freeze({LOADING:0,PLAYING:1,PAUSED:2,STALLING:3});function b(){return(new Date).getTime()}function w(e){return!!e.volume&&e.volume>0}class S extends n.Component{constructor(e){super(e),m(this,"videoWrapperRef",(0,n.createRef)()),m(this,"handleWindowResize",(()=>{if(!this.fullscreen){const e=this.getDimensions(),{height:t,width:i}=this.currentInterval;e.height!==t||e.width!==i?this.startNewInterval(e):(this.currentInterval.windowHeight=e.windowHeight,this.currentInterval.windowWidth=e.windowWidth)}})),m(this,"handlePlayheadDown",(({event:e})=>{const{onPlayheadDown:t}=this.props;this.setState({seeking:!0}),t&&t({event:e})})),m(this,"handlePlayheadUp",(({event:e})=>{const{onPlayheadUp:t}=this.props;this.setState({seeking:!1}),t&&t({event:e})})),m(this,"handleLoop",(()=>{this.videoTime=0})),m(this,"handleTimeChange",(e=>{const{seeking:t,ready:i}=this.state;if(!this.currentInterval.videoDuration)return;const n=1e3*e.time,r=function(e,t,i,n){if(e>t)return null;if(i<=0)return null;for(const r of n){const n=r*i;if(e<=n&&t>n)return r}return null}(this.videoTime,n,this.currentInterval.videoDuration,v);if("number"==typeof r&&this.props.playing&&!t&&i){const e=b();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:Math.floor(4*r),quartilePercentValue:r})}this.videoTime=n,this.props.onTimeChange&&this.props.onTimeChange(e)})),m(this,"handleDurationChange",(e=>{this.currentInterval.videoDuration=1e3*e.duration,this.props.onDurationChange&&this.props.onDurationChange(e)})),m(this,"handleReady",(e=>{const{ready:t}=this.state;t||this.setState({ready:!0}),this.props.onReady&&this.props.onReady(e)})),m(this,"handleEnded",(e=>{this.logFourthQuartileEvent(),this.props.loop&&(this.startNewInterval(),this.currentInterval.videoStartTime=0),this.props.onEnded&&this.props.onEnded(e)})),m(this,"handleVisibilityChange",((e,t)=>{if(0===e.length)return;const i=e.slice(-1)[0],n=function(e,t){for(let i=0;i<t.length;i+=1){const n=t[i],r=t[i+1];if(null==r)return n;if(n<=e&&e<r)return n}return null}(Number.parseFloat(i.intersectionRatio.toFixed(2)),g);"number"==typeof n&&(this.visible=n>=.5),null==n||n===this.currentInterval.viewability||this.fullscreen||(0===n?this.startNewInterval({viewability:n,playbackState:x.PAUSED}):this.startNewInterval({viewability:n}))})),m(this,"handleFullscreenChange",(({event:e,fullscreen:t})=>{if(t){const{height:e,width:t}=window.screen;this.startNewInterval({height:e,width:t,windowHeight:e,windowWidth:t})}else t||this.startNewInterval(this.getDimensions());this.fullscreen=t,this.props.onFullscreenChange&&this.props.onFullscreenChange({event:e,fullscreen:t})})),m(this,"handleClose",(()=>{this.startNewInterval()})),m(this,"handleContextMenu",(e=>{e.preventDefault()})),this.state={ready:!1,seeking:!1};const t=b();this.handleWindowResize=o()(this.handleWindowResize,1e3),this.currentInterval={videoDuration:0,startTime:t,endTime:t,videoStartTime:0,videoEndTime:0,isAudible:w(e),playbackState:this.getPlaybackState(e,this.state),quartile:-1,quartilePercentValue:0,height:null,width:null,windowHeight:null,windowWidth:null,viewability:null},this.videoTime=0,this.fullscreen=!1,this.visible=null}componentDidMount(){this.currentInterval={...this.currentInterval,...this.getDimensions()},window.addEventListener("resize",this.handleWindowResize),window.addEventListener("beforeunload",this.handleClose)}componentDidUpdate(e,t){const i={};w(e)&&!w(this.props)?i.isAudible=!1:!w(e)&&w(this.props)&&(i.isAudible=!0);const n=this.getPlaybackState(this.props,this.state);this.getPlaybackState(e,t)!==n&&(i.playbackState=n),Object.keys(i).length>0&&this.startNewInterval(i)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),window.removeEventListener("beforeunload",this.handleClose),this.startNewInterval()}getPlaybackState(e,t){return t.ready?e.playing&&!t.seeking?x.PLAYING:x.PAUSED:x.LOADING}getDimensions(){let e,t;if(this.videoWrapperRef.current){const i=this.videoWrapperRef.current;i.clientHeight&&i.clientWidth&&(e=i.clientHeight,t=i.clientWidth)}return{height:e,width:t,windowHeight:window.innerHeight,windowWidth:window.innerWidth}}logVideoEvent(e,t){const{closeupStoryPinViewability:i,contextLogData:n,logContextEvent:r}=this.props,{height:o,width:s,windowHeight:l,windowWidth:c,viewability:d,...u}=t;if(null!=o&&null!=s&&null!=l&&null!=c&&null!=d){const t={...u,height:o,width:s,windowHeight:l,windowWidth:c,viewability:i||d};r({event_type:e,...a({...n,view:this.fullscreen?108:n.view,eventData:{videoEvent:t}})})}}logFourthQuartileEvent(){const e=b();this.logVideoEvent(6906,{...this.currentInterval,startTime:e,endTime:e,videoStartTime:0,videoEndTime:0,quartile:4,quartilePercentValue:1})}startNewInterval(e){const t=b();this.logVideoEvent(6904,{...this.currentInterval,endTime:t,videoEndTime:this.videoTime}),this.currentInterval={...this.currentInterval,...e,startTime:t,videoStartTime:this.videoTime,endTime:-1,videoEndTime:-1}}render(){const{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:r,accessibilityProgressBarLabel:o,accessibilityUnmuteLabel:a,aspectRatio:c,backgroundColor:d,captions:m,contextLogData:v,controls:g,cropHeight:f,hlsConfig:x,inAdsDesktopVideoExperiment:b,isAutoPlay:w,loop:S,objectFit:C,onLoadedChange:E,onControlsPause:P,onControlsPlay:T,onSeek:I,onVolumeChange:j,playbackRate:R,playing:k,playsInline:A,poster:D,preload:O,rootMargin:M,src:L,surface:z,videoStartTime:Z,volume:F}=this.props,{seeking:N}=this.state,H=b?_:y;return void 0!==M&&(H.rootMargin=z?(0,l.e)(z):M),(0,p.jsx)(s.Z,{options:H,onVisibilityChange:this.handleVisibilityChange,children:(0,p.jsx)(h.xu,{ref:this.videoWrapperRef,onContextMenu:this.handleContextMenu,dangerouslySetInlineStyle:{__style:f?{display:"flex",alignItems:"center",height:`${f}px`}:{}},children:(0,p.jsx)(u.default,{accessibilityMaximizeLabel:e,accessibilityMinimizeLabel:t,accessibilityMuteLabel:i,accessibilityPauseLabel:n,accessibilityPlayLabel:r,accessibilityProgressBarLabel:o,accessibilityUnmuteLabel:a,aspectRatio:f?236/f:c,backgroundColor:d,captions:m,contextLogData:v,controls:g,hlsConfig:x,isAutoPlay:w,loop:S,objectFit:C,onDurationChange:this.handleDurationChange,onEnded:this.handleEnded,onFullscreenChange:this.handleFullscreenChange,onLoadedChange:E,onLoop:this.handleLoop,onControlsPause:P,onControlsPlay:T,onPlayheadDown:this.handlePlayheadDown,onPlayheadUp:this.handlePlayheadUp,onReady:this.handleReady,onSeek:I,onTimeChange:this.handleTimeChange,onVolumeChange:j,playbackRate:R,playing:!N&&k,onPlay:()=>{},onPlayError:()=>{},playsInline:A,poster:D,preload:O,src:L,videoStartTime:Z,visible:this.visible,volume:F})})})}}function C(e){const{logContextEvent:t}=(0,d.v)();return(0,p.jsx)(S,{...e,logContextEvent:t})}m(S,"defaultProps",h.nk.defaultProps)},875495:(e,t,i)=>{function n(e){return{type:"FEED_ITEM_REORDERED",payload:e}}function r(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}i.d(t,{EX:()=>s,N8:()=>r,Qv:()=>o,_f:()=>n,vX:()=>a});const o=(e,t,i=Object.freeze({}))=>({type:"APPEND_FEED_ITEMS",payload:{id:e,options:i,items:t}});function s(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}function a(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},737044:(e,t,i)=>{i.d(t,{Z:()=>N});var n=i(667294),r=i(90543),o=i(180549),s=i(247568),a=i(572551),l=i(301921),c=i(898781),d=i(784590),u=i(444445),h=i(883119),p=i(785893);const m=({data:e,itemIdx:t})=>(0,p.jsx)(l.default,{pin:e,pinId:e.id,authDesktopSurface:"RelatedProductsFeed",slotIndex:t,viewParameter:3334,viewType:72});function v({resourceOptions:e}){const t=(0,c.ZP)(),i=(0,d.Z)({name:"VisualLiveSearchProductFeedResource",options:e}),{data:r,isAtEnd:o,isLoaded:s,isFetching:l,fetchMore:v}=i,g=(0,n.useRef)(null);if(!s)return(0,p.jsx)(h.kC,{alignItems:"stretch",alignSelf:"center",justifyContent:"center",children:(0,p.jsx)(h.$j,{accessibilityLabel:t._('Loading related products', 'Label for loading spinner', 'Label for loading spinner'),show:!0})});const f=Array.isArray(r)?r:null==r?void 0:r.results;return(0,p.jsx)(h.xu,{display:"flex",maxWidth:"100%",ref:g,children:f&&(0,p.jsx)(a.default,{columnWidth:u.yF,comp:m,isAtEnd:o,isFetching:l,isLoaded:s,items:f,loadItems:()=>{l||o||v()},paddingStyle:"simplified",scrollContainerRef:g,virtualize:!1})})}var g=i(362810);class f extends n.PureComponent{constructor(...e){var t,i,n;super(...e),n=({data:e,itemIdx:t})=>{const{resourceOptions:{image_signature:i},visualLiveSearchResource:n}=this.props,r=n&&n.data&&n.data.search_identifier,o=`${window.location.pathname}products/${window.location.search}`;return"story"===e.type?(0,p.jsx)(g.Z,{story:e,dangerouslySetActionUrl:o,slotIndex:t}):(0,p.jsx)(l.default,{pin:e,pinId:e.id,authDesktopSurface:"FlashlightResultGrid",auxData:{viewData:{search_identifier:r},search_identifier:r,image_signature:i},slotIndex:t,viewParameter:3050,viewType:72})},(i="renderItem")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}componentDidMount(){const{visualLiveSearchResource:e,onSearchIdChange:t}=this.props,i=e&&e.data&&e.data.search_identifier;i&&t(i)}componentDidUpdate({visualLiveSearchResource:{data:e}}){const{visualLiveSearchResource:{data:t}}=this.props,i=t&&t.search_identifier,n=e&&e.search_identifier;i&&i!==n&&this.props.onSearchIdChange(i)}render(){const{visualLiveSearchResource:e}=this.props,{data:t,isFetching:i,fetchMore:n}=e,r=t&&t.results,o=t&&t.search_identifier;return(0,p.jsxs)(h.xu,{children:[r&&o&&(0,p.jsx)(h.xu,{children:(0,p.jsx)(h.Rk,{columnWidth:u.yF,comp:this.renderItem,gutterWidth:u.P2,items:r,loadItems:n,minCols:1,scrollContainer:()=>window})}),(0,p.jsx)(h.$j,{accessibilityLabel:this.props.i18n._('Loading search results...', 'Accessibility label for loading visual search results', 'Accessibility label for loading visual search results'),show:i||!o})]})}}function y(e){const t=(0,c.ZP)(),i=(0,d.Z)({name:"VisualLiveSearchResource",options:e.resourceOptions});return(0,p.jsx)(f,{...e,visualLiveSearchResource:i,i18n:t})}var _=i(99739),x=i(305791),b=i(975540),w=i(94047),S=i(297852),C=i(618446),E=i.n(C),P=i(430323),T=i(229428),I=i(920005),j=i(407043),R=i(780280),k=i(276775);function A(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let D=0,O="";class M extends n.Component{constructor(...e){super(...e),A(this,"state",{searchId:""}),A(this,"saveFlashlightImageContainerRef",(e=>{this.flashlightImageContainerRef=e})),A(this,"handleCropperChange",(({origCrop:e,cropSource:t})=>{const{pinId:i,history:n,imageSignature:r}=this.props;(0,S.Z)({cropArea:e,pinId:i,cropSource:t,isUnified:!1,imageSignature:r})!==window.location.pathname+window.location.search&&n.replace({pathname:`/pin/${i}/visual-search/`,query:{...e,cropSource:t,imageSignature:r},search:(0,w.Z)({cropArea:e,cropSource:t,imageSignature:r}),state:{internalNavigation:!0}})})),A(this,"handleSearchIdChange",(e=>{this.setState({searchId:e})}))}componentDidMount(){const{initialCropArea:e,pinResource:{data:t},pinId:i,history:n,view:r,imageSignature:o,logContextEvent:s}=this.props;if(!e&&t){const s=(0,_.Z)({initialCropArea:e,pin:t,imageSignature:o}),a=(0,S.Z)({cropArea:s,pinId:i,view:r,imageSignature:o});n.replace(a)}this.flashlightImageContainerRef&&O===i&&(this.flashlightImageContainerRef.scrollTop=D),s({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:i}})}componentDidUpdate(e){E()(e.initialCropArea,this.props.initialCropArea)||this.setState({searchId:""})}componentWillUnmount(){const{pinId:e}=this.props;this.flashlightImageContainerRef&&(D=this.flashlightImageContainerRef.scrollTop,O=e)}getResourceOptions({pinId:e,cropArea:t,width:i,height:n,cropSource:r,imageSignature:o}){return{pin_id:e,image_signature:o,crop:(0,b.Z)({cropArea:t,scaledWidth:i,scaledHeight:n}),crop_source:r}}renderSpinner(){return(0,p.jsx)(h.$j,{accessibilityLabel:this.props.i18n._('Loading visual search...', 'Accessibility label for loading visual search page', 'Accessibility label for loading visual search page'),show:!0})}renderFlashlight(){const{pinResource:{data:e},initialCropArea:t,initialCropSource:i,location:a,requestContext:l,view:c,imageSignature:d,history:u}=this.props;if(!e)return null;const{id:m,image_signature:g}=e,f=d||g,{width:b,height:w,url:S}=(0,x.Z)({pin:e,imageSignature:f});""===S&&u.push(`/pin/${m}/visual-search/`);const C=(0,_.Z)({initialCropArea:t,pin:e,imageSignature:f}),E=i||5,P=this.getResourceOptions({pinId:m,cropArea:C,width:b,height:w,cropSource:E,imageSignature:f}),j=b+20,R=!(a&&a.state&&a.state.internalNavigation),k=!!e.visual_objects&&f===g&&(0,T.m)(e.visual_objects)||[],A=l&&l.isRTL||!1,D=j+16;return(0,p.jsxs)(n.Fragment,{children:[(0,p.jsx)(r.Z,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"},children:(0,p.jsxs)(h.xu,{width:"100%",paddingY:3,paddingX:9,display:"flex",alignItems:"center",children:[(0,p.jsx)(h.xu,{position:"absolute",children:(0,p.jsx)(o.Z,{pinId:e.id})}),(0,p.jsx)(h.xu,{flex:"grow",children:(0,p.jsx)(h.xv,{align:"center",weight:"bold",children:(0,p.jsx)("span",{className:"deprecatedTextSizeXL",children:"products"===c?this.props.i18n._('Shop similar items', 'Header explaining results of flashlight products search', 'Header explaining results of flashlight products search'):this.props.i18n._('More Ideas', 'Header explaining results of flashlight search', 'Header explaining results of flashlight search')})})})]})}),(0,p.jsx)(I.c,{children:t=>{var i;return"products"===c?(0,p.jsxs)(h.xu,{dangerouslySetInlineStyle:{__style:{marginTop:60}},children:[(0,p.jsx)(v,{resourceOptions:P}),";"]}):(0,p.jsxs)(h.xu,{display:"flex",paddingX:12,children:[(0,p.jsx)(h.xu,{bottom:!0,overflow:"auto",position:"fixed",dangerouslySetInlineStyle:{__style:{width:j,height:"inherit",top:t+60,marginBottom:10}},ref:this.saveFlashlightImageContainerRef,children:(0,p.jsx)(h.xu,{"data-test-id":"flashlight-enabled-image",dangerouslySetInlineStyle:{__style:{width:b,height:w}},children:(0,p.jsxs)(h.zd,{height:w,rounding:2,width:b,children:[(0,p.jsx)(h.Ee,{alt:null!==(i=e.description)&&void 0!==i?i:"",naturalHeight:w,naturalWidth:b,src:S}),(0,p.jsx)(s.Z,{showAnimation:R,imageSignature:f,imageSize:{h:w,w:b},initialCropArea:C,onChange:this.handleCropperChange,pin:e,spotlightAreas:k})]})})}),(0,p.jsx)(h.xu,{position:"relative",width:"100%",dangerouslySetInlineStyle:{__style:{top:60,marginLeft:A?void 0:D,marginRight:A?D:void 0}},children:(0,p.jsx)(y,{resourceOptions:P,onSearchIdChange:this.handleSearchIdChange})})]})}})]})}render(){const{pinResource:{isLoaded:e}}=this.props,{searchId:t}=this.state;return(0,p.jsx)(P.Z,{view:72,objectId:t,children:(0,p.jsx)(h.xu,{children:e?this.renderFlashlight():this.renderSpinner()})})}}function L(e){const{logContextEvent:t}=(0,j.v)(),i=(0,c.ZP)(),n=(0,d.Z)({name:"PinResource",options:{id:e.pinId,field_set_key:"detailed",fetch_visual_search_objects:!0}});return(0,p.jsx)(M,{...e,history:(0,k.k6)(),location:(0,k.TH)(),pinResource:n,requestContext:(0,R.B)(),i18n:i,logContextEvent:t})}var z=i(418614),Z=i(826067);const F=(...e)=>e.every(Number.isFinite);function N(){const{id:e}=(0,k.UO)(),t=(0,k.TH)(),i=(0,Z.mB)(t.search),n=t.pathname.includes("/products");(0,z.Z)({name:"PinResource",getOptions:({routeData:{params:{id:e}}})=>({id:e,field_set_key:"detailed",fetch_visual_search_objects:!0})});const{x:r,y:o,w:s,h:a,cropSource:l}=function(e){return Object.keys(e).reduce(((t,i)=>({...t,[i]:parseInt(e[i],10)})),{})}(i),{q:c,rs:d,imageSignature:u}=i;return(0,p.jsx)(L,{initialCropArea:F(r,o,s,a)?{x:r,y:o,w:s,h:a}:void 0,initialCropSource:l||void 0,pinId:null!=e?e:"",searchQuery:c,trafficSource:d,view:n?"products":"flashlight",imageSignature:u})}},395164:(e,t,i)=>{i.d(t,{T:()=>s,Z:()=>a});var n=i(226198),r=i(314880);const o=[];function s(e){let t;try{t=JSON.stringify({errorObj:e})}catch(l){t=JSON.stringify({errorObj:{message:e.message,name:"logToServer stringify exception"}})}const i=(s={report_context:JSON.stringify({current_url:window.location.href,client_version:"d861b3a"}),report_data:t},Object.keys(s).map((e=>e+"="+encodeURIComponent(s[e]))).join("&"));var s;const a=window.btoa(i);if(-1===o.indexOf(a)){const e=new XMLHttpRequest;e.open("post","/_/_/logClientError/",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded");const t=(0,r.H)();t&&e.setRequestHeader("X-Pinterest-PWS-Handler",t),e.setRequestHeader("X-CSRFToken",function(e){const t=("; "+document.cookie).split("; "+e.name+"=");return 2===t.length?t.pop().split(";").shift():""}(n.fS)),e.send(i),o.push(a)}o.length>100&&o.shift()}function a(){window.addEventListener("error",(e=>{const t=e.error||{};s({name:t.name,message:t.message||e.message,stack:t.stack,filename:e.filename,line:e.lineno,column:e.colno})})),window.addEventListener("unhandledrejection",(e=>{var t,i,n,r,o;if(!((null==e?void 0:e.reason)instanceof Error))return;const{reason:a}=e,l="string"==typeof(null==a?void 0:a.message)?a.message:String(a);s({name:null!==(t=null==a?void 0:a.name)&&void 0!==t?t:"unhandledrejection",message:l,message_detail:null==a?void 0:a.message_detail,original_message:null==a?void 0:a.original_message,stack:null==a?void 0:a.stack,filename:null==a?void 0:a.fileName,line:null!==(i=null!==(n=null==a?void 0:a.lineno)&&void 0!==n?n:null==a?void 0:a.line)&&void 0!==i?i:null==a?void 0:a.lineNumber,column:null!==(r=null!==(o=null==a?void 0:a.column)&&void 0!==o?o:null==a?void 0:a.colno)&&void 0!==r?r:null==a?void 0:a.columnNumber})}))}}},e=>{e.O(0,[33293],(()=>{[97270,67228,89181,92982,47424,5954,27624,48035,5035,43473,22347,22538,1593].map(e.E)}),5),e.O(0,[33293],(()=>{[97270,67228,89181,92982,47424,5954,27624,48035,5035,43473,22347,22538,1593].map(e.E)}),5);var t=t=>e(e.s=t);e.O(0,[97270,83119,67631,66113,62015,76775,21151,78821,8475,22545,54372,96991,85815,88273,34441,18419,34363,53959,17001,75348,30613,15071],(()=>(t(508563),t(798477))));e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search-authdesktop-437ca2bb2cfa5174.mjs.map